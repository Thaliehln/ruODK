% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/attachment_list.R
\name{attachment_list}
\alias{attachment_list}
\title{List all submissions of one form.}
\usage{
attachment_list(pid, fid, iid, url = Sys.getenv("ODKC_URL"),
  un = Sys.getenv("ODKC_UN"), pw = Sys.getenv("ODKC_PW"))
}
\arguments{
\item{pid}{The numeric ID of the project, e.g.: 2.}

\item{fid}{The alphanumeric form ID, e.g. "build_Spotlighting-0-8_1559885147".}

\item{iid}{The `instance_id`, a UUID, as returned by `submission_list`.}

\item{url}{The OData URL, ending in .svc, no trailing slash.}

\item{un}{The ODK Central username (an email address),
default: Sys.getenv("ODKC_UN").
Add to your ~/.Rprofile: Sys.setenv(ODKC_UN="...@...")}

\item{pw}{The ODK Central password,,
default: Sys.getenv("ODKC_PW").
Add to your ~/.Rprofile: Sys.setenv(ODKC_PW="...")}
}
\value{
A tibble containing some high-level details of the submission
        attachments.
        One row per submission attachment, columns are submission attributes:

        * name: The attachment filename, e.g. 12345.jpg
        * exists: Whether the attachment for that submission exists on the
          server.
}
\description{
When a Submission is created, either over the OpenRosa or the REST interface,
its XML data is analysed to determine which file attachments it references:
these may be photos or video taken as part of the survey, or an audit/timing
log, among other things. Each reference is an expected attachment, and these
expectations are recorded permanently alongside the Submission. With this
subresource, you can list the expected attachments, see whether the server
actually has a copy or not, and download, upload, re-upload, or clear binary
data for any particular attachment.
}
\details{
You can retrieve the list of expected Submission attachments at this route,
along with a boolean flag indicating whether the server actually has a copy
of the expected file or not. If the server has a file, you can then append
its filename to the request URL to download only that file (see below).
}
\examples{
\dontrun{
# With default credentials, see vignette("setup")
s_default <- submission_list(1, "build_xformsId", "uuid:...")

# With explicit credentials, see tests
sl <- submission_list(
  Sys.getenv("ODKC_TEST_PID"),
  Sys.getenv("ODKC_TEST_FID"),
  url = Sys.getenv("ODKC_TEST_URL"),
  un = Sys.getenv("ODKC_TEST_UN"),
  pw = Sys.getenv("ODKC_TEST_PW")
)

al <- attachment_list(
  Sys.getenv("ODKC_TEST_PID"),
  Sys.getenv("ODKC_TEST_FID"),
  sl$instance_id[[1]],
  url = Sys.getenv("ODKC_TEST_URL"),
  un = Sys.getenv("ODKC_TEST_UN"),
  pw = Sys.getenv("ODKC_TEST_PW")
)
al \%>\% knitr::kable(.)

# attachment_list returns a tibble
class(al)
# > c("tbl_df", "tbl", "data.frame")

# Submission attributes are the tibble's columns
names(al)
# > "name" "exists"
}
}
\seealso{
\url{https://odkcentral.docs.apiary.io/#reference/forms-and-submissions/attachments/listing-expected-submission-attachments}

\url{https://odkcentral.docs.apiary.io/#reference/forms-and-submissions/'-form-attachments/listing-expected-form-attachments}

Other restful-api: \code{\link{form_detail}},
  \code{\link{form_list}}, \code{\link{form_schema}},
  \code{\link{form_xml}}, \code{\link{project_detail}},
  \code{\link{project_list}},
  \code{\link{submission_detail}},
  \code{\link{submission_export}},
  \code{\link{submission_list}}
}
\concept{restful-api}
