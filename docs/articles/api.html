<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing the RESTful API • ruODK</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Accessing the RESTful API">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ruODK</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/api.html">Accessing the RESTful API</a>
    </li>
    <li>
      <a href="../articles/odata.html">Accessing the OData API</a>
    </li>
    <li>
      <a href="../articles/setup.html">Setup</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dbca-wa/ruODK">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="api_files/htmlwidgets-1.3/htmlwidgets.js"></script><link href="api_files/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet">
<script src="api_files/jsoneditor-5.25.6/jsoneditor.min.js"></script><script src="api_files/jsonedit-binding-2.1.0/jsonedit.js"></script><script src="api_files/jquery-1.12.4/jquery.min.js"></script><link href="api_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="api_files/datatables-binding-0.7/datatables.js"></script><link href="api_files/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="api_files/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="api_files/dt-core-1.10.16/js/jquery.dataTables.min.js"></script><link href="api_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet">
<script src="api_files/crosstalk-1.0.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Accessing the RESTful API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbca-wa/ruODK/blob/master/vignettes/api.Rmd"><code>vignettes/api.Rmd</code></a></small>
      <div class="hidden name"><code>api.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ruODK)</a></code></pre></div>
<div id="scope" class="section level1">
<h1 class="hasAnchor">
<a href="#scope" class="anchor"></a>Scope</h1>
<p>This vignette provides a walk-through of the “getting data out” functions of the RESTful API endpoints which list and view details.</p>
<p><code>ruODK</code> users would mix and match parts of the demonstrated workflows to build their own data pipelines, e.g.:</p>
<ul>
<li>to build a quick analysis from all data, freshly downloaded from a smaller project, or</li>
<li>to build an interactive ETL pipeline to selectively download only new submissions for further processing and upload into downstream data warehouses.</li>
</ul>
<div id="three-ways-to-happiness" class="section level2">
<h2 class="hasAnchor">
<a href="#three-ways-to-happiness" class="anchor"></a>Three ways to happiness</h2>
<p>ODK Central offers no less than three different ways to access data:</p>
<ul>
<li>viewing ODK Central data in MS PowerBI, MS Excel, Tableau, or <code>ruODK</code> through the OData service endpoints, or</li>
<li>downloading all submissions including attachments as one (possibly gigantic) zip archive either through the “Export Submissions” button in the ODK Central form submissions page or through <code>ruODK</code>,</li>
<li>viewing ODK Central data through <code>ruODK</code>’s RESTful API functions.</li>
</ul>
<p>While the <code><a href="../articles/odata.html">vignette("odata", package="ruODK")</a></code> (online <a href="https://dbca-wa.github.io/ruODK/articles/odata.html">here</a>) illustrates the first option, this vignette demonstrates the remaining two.</p>
<p>Not implemented (yet) are the “managing ODK Central” functions which create, update, and delete projects, forms, users, roles, and permissions. We haven’t yet found a strong use case to automate those functions - ODK Central (driven by humans) does those jobs beautifully on an expected scale.</p>
</div>
</div>
<div id="setup-ruodk" class="section level1">
<h1 class="hasAnchor">
<a href="#setup-ruodk" class="anchor"></a>Setup ruODK</h1>
<p>See <a href="https://dbca-wa.github.io/ruODK/articles/setup.html"><code>vignette("Setup", package = "ruODK")</code></a> for detailed options to configure <code>ruODK</code>.</p>
<p>Here, we’ll grab the OData service URL from the form used in this vignette, plus username and password of a web user of ODK Central with access to that form.</p>
<p><code><a href="../reference/ru_setup.html">ruODK::ru_setup()</a></code> will populate the default url, project ID, and form ID which are used by <code>ruODK</code>’s other functions (unless specified otherwise).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_setup.html">ru_setup</a></span>(</a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">svc =</span> <span class="st">"https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-2_1558575936.svc"</span>,</a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">un =</span> <span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"ODKC_TEST_UN"</span>),</a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">pw =</span> <span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"ODKC_TEST_PW"</span>)</a>
<a class="sourceLine" id="cb2-5" title="5">)</a></code></pre></div>
</div>
<div id="projects" class="section level1">
<h1 class="hasAnchor">
<a href="#projects" class="anchor"></a>Projects</h1>
<p>List projects. We see the project ID, a name, the number of forms and app users, dates of last form submissions plus project management timestamps (created, updated).</p>
<p>The important bit here is the project ID.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">p &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/project_list.html">project_list</a></span>()</a>
<a class="sourceLine" id="cb3-2" title="2">p <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">id</th>
<th align="left">name</th>
<th align="right">forms</th>
<th align="right">app_users</th>
<th align="left">last_submission</th>
<th align="left">created_at</th>
<th align="left">updated_at</th>
<th align="left">archived</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">8</td>
<td align="left">AmenazasRD</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-04-14 06:21:00</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="left">BAFCO Test</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2019-04-19 01:26:49</td>
<td align="left">2019-04-19 00:30:45</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">CaVaTeCo</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2019-04-30 08:07:55</td>
<td align="left">2019-04-30 06:43:22</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="left">CherryPatch</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2019-05-28 17:32:15</td>
<td align="left">2019-05-27 21:09:33</td>
<td align="left">2019-05-29 20:08:10</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">32</td>
<td align="left">Collect3289v2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">2019-08-07 13:44:19</td>
<td align="left">2019-08-07 12:52:56</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Curso</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="left">2019-03-21 22:22:57</td>
<td align="left">2019-02-26 03:55:50</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="left">DBCA WA</td>
<td align="right">8</td>
<td align="right">3</td>
<td align="left">2019-06-05 01:33:49</td>
<td align="left">2019-05-17 03:10:51</td>
<td align="left">2019-05-24 05:24:00</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="left">DRC Test</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="left">2019-05-07 13:14:01</td>
<td align="left">2019-03-29 08:52:32</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">24</td>
<td align="left">Farmers Survey</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-06-25 15:51:47</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Forms you made before projects existed</td>
<td align="right">44</td>
<td align="right">28</td>
<td align="left">2019-08-24 16:10:29</td>
<td align="left">2019-02-14 17:28:00</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">30</td>
<td align="left">FWW Epi Survey</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2019-08-06 17:19:15</td>
<td align="left">2019-08-02 15:04:09</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">g</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-03-27 13:16:47</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">23</td>
<td align="left">Guillermo’s tests</td>
<td align="right">44</td>
<td align="right">0</td>
<td align="left">2019-06-16 03:02:45</td>
<td align="left">2019-06-15 11:30:05</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">33</td>
<td align="left">issa test</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-08-07 22:27:11</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">26</td>
<td align="left">Kinshasa</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-07-25 19:26:53</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">34</td>
<td align="left">MBA</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">2019-08-13 03:30:17</td>
<td align="left">2019-08-13 02:06:28</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">mon projet</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-02-14 19:32:05</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">MyProjects</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">2019-02-25 19:31:40</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">25</td>
<td align="left">Olivier38</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2019-07-27 20:14:39</td>
<td align="left">2019-06-27 15:52:10</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">21</td>
<td align="left">PresentationTest</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">2019-06-11 09:38:45</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="left">ProjetTest</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-05-10 16:04:04</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="left">psud test</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">2019-06-12 00:30:26</td>
<td align="left">2019-06-12 00:20:02</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">35</td>
<td align="left">Ronald Munjoma Test</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">2019-08-18 12:37:29</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">29</td>
<td align="left">✨Secret project ✨</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">2019-08-02 03:55:59</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">SurveyAir</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">2019-04-11 07:36:35</td>
<td align="left">2019-03-12 00:15:36</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="left">TBBT</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2019-05-17 12:29:18</td>
<td align="left">2019-05-17 12:21:50</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">27</td>
<td align="left">Test form</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-07-25 19:35:11</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">TestWFPProjects</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-04-25 16:09:51</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">28</td>
<td align="left">Tom Test</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2019-07-31 20:45:47</td>
<td align="left">2019-07-31 20:08:20</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">UDA</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="left">2019-05-07 07:31:12</td>
<td align="left">2019-05-02 14:52:35</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">20</td>
<td align="left">UNCP-MW Test</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">2019-06-06 00:36:20</td>
<td align="left">2019-06-05 14:01:06</td>
<td align="left">2019-06-05 18:19:14</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">36</td>
<td align="left">Yaw’s test</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">2019-09-02 22:59:35</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">31</td>
<td align="left">Collect3289</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">2019-08-07 12:39:42</td>
<td align="left">2019-08-07 12:52:50</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="right">17</td>
<td align="left">sdf</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-05-24 12:21:59</td>
<td align="left">2019-05-24 12:23:09</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="left">Turtles</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">NA</td>
<td align="left">2019-05-17 08:18:39</td>
<td align="left">2019-05-24 05:25:34</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="right">19</td>
<td align="left">WatermelonPatch</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2019-05-29 19:50:50</td>
<td align="left">2019-05-29 19:44:14</td>
<td align="left">2019-05-29 20:06:46</td>
<td align="left">TRUE</td>
</tr>
</tbody>
</table>
<p>Inspect a project using its ID. We receive a tibble with exactly one row, all the columns of <code><a href="../reference/project_list.html">ruODK::project_list</a></code> plus a column <code>verbs</code>, which contains all available API actions for a project.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">pd &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/project_detail.html">project_detail</a></span>()</a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co"># Project details (without verbs)</span></a>
<a class="sourceLine" id="cb4-4" title="4">pd <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span><span class="st">"verbs"</span>) <span class="op">%&gt;%</span><span class="st">  </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">id</th>
<th align="left">name</th>
<th align="right">forms</th>
<th align="right">app_users</th>
<th align="left">last_submission</th>
<th align="left">created_at</th>
<th align="left">updated_at</th>
<th align="left">archived</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">14</td>
<td align="left">DBCA WA</td>
<td align="right">8</td>
<td align="right">3</td>
<td align="left">2019-06-05T01:33:49.613Z</td>
<td align="left">2019-05-17T03:10:51.069Z</td>
<td align="left">2019-05-24T05:24:00.859Z</td>
<td align="left">FALSE</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co"># Available verbs</span></a>
<a class="sourceLine" id="cb5-3" title="3">pd<span class="op">$</span>verbs[[<span class="dv">1</span>]] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(.)</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt;  [1] "backup.create"            "backup.terminate"        </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt;  [3] "config.read"              "field_key.create"        </span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt;  [5] "field_key.delete"         "field_key.list"          </span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt;  [7] "form.create"              "form.delete"             </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt;  [9] "form.list"                "form.read"               </span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; [11] "form.update"              "project.create"          </span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt; [13] "project.delete"           "project.list"            </span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt; [15] "project.read"             "project.update"          </span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt; [17] "session.end"              "submission.create"       </span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt; [19] "submission.read"          "submission.list"         </span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; [21] "user.create"              "user.list"               </span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; [23] "user.password.invalidate" "user.read"               </span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; [25] "user.update"              "submission.update"       </span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt; [27] "role.create"              "role.update"             </span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt; [29] "role.delete"              "assignment.list"         </span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">#&gt; [31] "assignment.create"        "assignment.delete"       </span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">#&gt; [33] "user.delete"              "audit.read"</span></a></code></pre></div>
<p>Nothing apart from the verbs is new compared to the data returned by <code><a href="../reference/project_list.html">ruODK::project_list</a></code>.</p>
<p>To learn more about the functionality behind the verbs, refer to the interactive <a href="https://odkcentral.docs.apiary.io/#reference/project-management">ODK Central API documentation</a>.</p>
<p>To retrieve data from ODK Central, the functions shown below will suffice.</p>
</div>
<div id="forms" class="section level1">
<h1 class="hasAnchor">
<a href="#forms" class="anchor"></a>Forms</h1>
<div id="list-forms-for-a-project" class="section level2">
<h2 class="hasAnchor">
<a href="#list-forms-for-a-project" class="anchor"></a>List forms for a project</h2>
<p>To download form submissions, we need to know project ID and form ID.</p>
<p>There are several ways of retrieving the form ID:</p>
<ul>
<li>Browsing forms in the ODK Central’s project overviews,</li>
<li>Stealing the form ID from the OData service endpoint URL as shown on ODK Central’s form submission page,</li>
<li>Listing form metadata for a given project ID with <code><a href="../reference/form_list.html">ruODK::form_list()</a></code>.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">forms &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/form_list.html">form_list</a></span>() </a>
<a class="sourceLine" id="cb6-2" title="2">forms <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">fid</th>
<th align="left">version</th>
<th align="left">state</th>
<th align="left">submissions</th>
<th align="left">created_at</th>
<th align="right">created_by_id</th>
<th align="left">created_by</th>
<th align="left">updated_at</th>
<th align="left">last_submission</th>
<th align="left">hash</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Flora Quadrat 0.1</td>
<td align="left">build_Flora-Quadrat-0-1_1558330379</td>
<td align="left"></td>
<td align="left">closing</td>
<td align="left">1</td>
<td align="left">2019-05-20 05:33:15</td>
<td align="right">57</td>
<td align="left"><a href="mailto:florian.mayer@dbca.wa.gov.au" class="email">florian.mayer@dbca.wa.gov.au</a></td>
<td align="left">2019-05-23 01:46:39</td>
<td align="left">2019-05-20 05:44:20</td>
<td align="left">4f0036619468ef05b572631b04b94f06</td>
</tr>
<tr class="even">
<td align="left">Flora Quadrat 0.2</td>
<td align="left">build_Flora-Quadrat-0-2_1558575936</td>
<td align="left"></td>
<td align="left">open</td>
<td align="left">2</td>
<td align="left">2019-05-23 01:46:08</td>
<td align="right">57</td>
<td align="left"><a href="mailto:florian.mayer@dbca.wa.gov.au" class="email">florian.mayer@dbca.wa.gov.au</a></td>
<td align="left">2019-08-19 07:57:38</td>
<td align="left">2019-05-23 03:12:16</td>
<td align="left">14e269a2374132392c275117efbe67b6</td>
</tr>
<tr class="odd">
<td align="left">Flora Quadrat 0.3</td>
<td align="left">build_Flora-Quadrat-0-3_1559119570</td>
<td align="left"></td>
<td align="left">open</td>
<td align="left">1</td>
<td align="left">2019-05-29 08:48:15</td>
<td align="right">57</td>
<td align="left"><a href="mailto:florian.mayer@dbca.wa.gov.au" class="email">florian.mayer@dbca.wa.gov.au</a></td>
<td align="left">NA</td>
<td align="left">2019-05-29 08:55:59</td>
<td align="left">d5a80cefb1895eefcd0cb86a12d8acb4</td>
</tr>
<tr class="even">
<td align="left">Flora Quadrat 0.4</td>
<td align="left">build_Flora-Quadrat-0-4_1564384341</td>
<td align="left"></td>
<td align="left">open</td>
<td align="left">0</td>
<td align="left">2019-08-19 07:58:28</td>
<td align="right">57</td>
<td align="left"><a href="mailto:florian.mayer@dbca.wa.gov.au" class="email">florian.mayer@dbca.wa.gov.au</a></td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">1bb959d541ac6990e3f74893e38c855b</td>
</tr>
<tr class="odd">
<td align="left">Spotlighting 0.5</td>
<td align="left">build_Spotlighting-0-5_1558320001</td>
<td align="left"></td>
<td align="left">closing</td>
<td align="left">1</td>
<td align="left">2019-05-20 02:44:47</td>
<td align="right">57</td>
<td align="left"><a href="mailto:florian.mayer@dbca.wa.gov.au" class="email">florian.mayer@dbca.wa.gov.au</a></td>
<td align="left">2019-05-20 06:30:41</td>
<td align="left">2019-05-20 02:58:09</td>
<td align="left">3775dcdface98ba3a426739c494123f6</td>
</tr>
<tr class="even">
<td align="left">Spotlighting 0.6</td>
<td align="left">build_Spotlighting-0-6_1558333698</td>
<td align="left"></td>
<td align="left">open</td>
<td align="left">3</td>
<td align="left">2019-05-20 06:30:21</td>
<td align="right">57</td>
<td align="left"><a href="mailto:florian.mayer@dbca.wa.gov.au" class="email">florian.mayer@dbca.wa.gov.au</a></td>
<td align="left">NA</td>
<td align="left">2019-05-30 07:13:29</td>
<td align="left">456daaa9a4f96670e6eef3cf4a7dd0db</td>
</tr>
<tr class="odd">
<td align="left">Spotlighting Survey End 0.3</td>
<td align="left">build_Spotlighting-Survey-End-0-3_1558320208</td>
<td align="left"></td>
<td align="left">open</td>
<td align="left">2</td>
<td align="left">2019-05-20 02:44:38</td>
<td align="right">57</td>
<td align="left"><a href="mailto:florian.mayer@dbca.wa.gov.au" class="email">florian.mayer@dbca.wa.gov.au</a></td>
<td align="left">NA</td>
<td align="left">2019-05-30 07:15:53</td>
<td align="left">5fdfac8e773834b1267f7ca7e1c9a428</td>
</tr>
<tr class="even">
<td align="left">Spotlighting Survey Start 0.3</td>
<td align="left">build_Spotlighting-Survey-Start-0-3_1558320795</td>
<td align="left"></td>
<td align="left">open</td>
<td align="left">7</td>
<td align="left">2019-05-20 02:53:50</td>
<td align="right">57</td>
<td align="left"><a href="mailto:florian.mayer@dbca.wa.gov.au" class="email">florian.mayer@dbca.wa.gov.au</a></td>
<td align="left">NA</td>
<td align="left">2019-06-05 01:33:49</td>
<td align="left">f548a064cca13bca746f3c0b1a8b5a32</td>
</tr>
</tbody>
</table>
<p>Further to the metadata shown here, a column <code>xml</code> contains the entire XForms definition (originally XML) as nested list.</p>
<p>If the original XML is needed rather than the R equivalent (nested list), we can use <code><a href="../reference/form_xml.html">ruODK::form_xml</a></code> with parameter <code>parse=FALSE</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">form_xml &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/form_xml.html">form_xml</a></span>(<span class="dt">parse=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb7-2" title="2">form_xml</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#&gt; {xml_document}</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt; &lt;html xmlns="http://www.w3.org/2002/xforms" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa"&gt;</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt; [1] &lt;h:head&gt;\n  &lt;h:title&gt;Flora Quadrat 0.2&lt;/h:title&gt;\n  &lt;model&gt;\n    &lt;in ...</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt; [2] &lt;h:body&gt;\n  &lt;group ref="/data/location" appearance="field-list"&gt;\n   ...</span></a></code></pre></div>
</div>
<div id="inspect-form-schema" class="section level2">
<h2 class="hasAnchor">
<a href="#inspect-form-schema" class="anchor"></a>Inspect form schema</h2>
<p>The nested list of lists returned by <code>form_schema</code> is the cleanest representation of the Xform definition available in R.</p>
<p>See the <a href="https://odkcentral.docs.apiary.io/#reference/forms-and-submissions/'-individual-form/retrieving-form-schema-json">ODK Central API docs</a> and the examples of <code>??ruODK::form_schema()</code> for more detail.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">fs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/form_schema.html">form_schema</a></span>()</a>
<a class="sourceLine" id="cb8-2" title="2">listviewer<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/listviewer/man/jsonedit.html">jsonedit</a></span>(form_schema, <span class="dt">mode=</span><span class="st">"code"</span>)</a></code></pre></div>
<div id="htmlwidget-c6634d4c58858100a7d4" style="width:672px;height:432.632880098888px;" class="jsonedit html-widget"></div>
<script type="application/json" data-for="htmlwidget-c6634d4c58858100a7d4">{"x":{"data":["function (flatten = FALSE, odata = FALSE, pid = get_default_pid(), ","    fid = get_default_fid(), url = get_default_url(), un = get_default_un(), ","    pw = get_default_pw()) ","{","    . <- NULL","    yell_if_missing(url, un, pw, pid = pid, fid = fid)","    glue::glue(\"{url}/v1/projects/{pid}/forms/{fid}.schema.json\") %>% ","        httr::GET(httr::add_headers(Accept = \"application/json\"), ","            httr::authenticate(un, pw), query = list(flatten = flatten, ","                odata = odata)) %>% yell_if_error(., url, un, ","        pw) %>% httr::content(.)","}"],"options":{"mode":"code","modes":["code","form","text","tree","view"]}},"evals":[],"jsHooks":[]}</script><p>The form schema tells us about form field data types (e.g. dates, geopoints, binary attachments) and repeating groups. We need this knowledge to parse the submission data into tidy tibbles later.</p>
<p>Feel free to search this list for “binary” to find the field names of file attachments. Similarly, search for “dateTime” to find field names of datetimes.</p>
</div>
<div id="show-details-of-one-form" class="section level2">
<h2 class="hasAnchor">
<a href="#show-details-of-one-form" class="anchor"></a>Show details of one form</h2>
<p>The details of a form are exactly the same as the output of <code><a href="../reference/form_list.html">ruODK::form_list()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">form &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/form_detail.html">form_detail</a></span>()</a>
<a class="sourceLine" id="cb9-2" title="2">form <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">fid</th>
<th align="left">version</th>
<th align="left">state</th>
<th align="right">submissions</th>
<th align="left">created_at</th>
<th align="right">created_by_id</th>
<th align="left">created_by</th>
<th align="left">updated_at</th>
<th align="left">last_submission</th>
<th align="left">hash</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Flora Quadrat 0.2</td>
<td align="left">build_Flora-Quadrat-0-2_1558575936</td>
<td align="left"></td>
<td align="left">open</td>
<td align="right">2</td>
<td align="left">2019-05-23T01:46:08.474Z</td>
<td align="right">57</td>
<td align="left"><a href="mailto:florian.mayer@dbca.wa.gov.au" class="email">florian.mayer@dbca.wa.gov.au</a></td>
<td align="left">2019-08-19T07:57:38.755Z</td>
<td align="left">2019-05-23T03:12:16.012Z</td>
<td align="left">14e269a2374132392c275117efbe67b6</td>
</tr></tbody>
</table>
</div>
</div>
<div id="submissions" class="section level1">
<h1 class="hasAnchor">
<a href="#submissions" class="anchor"></a>Submissions</h1>
<p>We are getting closer to the actual data! This section shows two of the options for data access: dump all submissions, or extract a subset.</p>
<div id="get-all-submissions-for-one-form" class="section level2">
<h2 class="hasAnchor">
<a href="#get-all-submissions-for-one-form" class="anchor"></a>Get all submissions for one form</h2>
<p>Smaller datasets lend themselves to be exported in one go. ODK Central offers one giant zip file containing all submissions, any repeating groups, and any attachments both on the form submission page, and as API endpoint which is provided as <code><a href="../reference/submission_export.html">ruODK::submission_export()</a></code>.</p>
<p>The default behaviour of <code><a href="../reference/submission_export.html">ruODK::submission_export()</a></code> is to write the zip file to the project root (<code><a href="https://rdrr.io/pkg/here/man/here.html">here::here()</a></code>), and to overwrite existing previous downloads. See <code>?ruODK::submission_export()</code> for alternative download and retention options.</p>
<p>In the following chuck, we illustrate common tasks:</p>
<ul>
<li>Download the zip file.</li>
<li>Unpack the zip file.</li>
<li>Join repeating form group data <code>data_taxon</code> to main data <code>data_quadrat</code> to annotate <code>data_taxon</code> with data from <code>data_quadrat</code>.</li>
<li>Sanitise the column names.</li>
<li>Prepend all attachment filenames (e.g. <code>data_quadrat$location_quadrat_photo</code>, <code>data_taxon$photo_in_situ</code>) with <code>media/</code>.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">t &lt;-<span class="st"> </span>fs<span class="op">::</span><span class="kw"><a href="http://fs.r-lib.org/reference/create.html">dir_create</a></span>(<span class="st">"attachments"</span>)</a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co"># Predict filenames (with knowledge of form)</span></a>
<a class="sourceLine" id="cb10-4" title="4">fid &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_fid</a></span>() <span class="co"># "build_Flora-Quadrat-0-2_1558575936.svc"</span></a>
<a class="sourceLine" id="cb10-5" title="5">fid_csv &lt;-<span class="st"> </span>fs<span class="op">::</span><span class="kw"><a href="http://fs.r-lib.org/reference/path.html">path</a></span>(t, glue<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span>(<span class="st">"{fid}.csv"</span>))</a>
<a class="sourceLine" id="cb10-6" title="6">fid_csv_tae &lt;-<span class="st"> </span>fs<span class="op">::</span><span class="kw"><a href="http://fs.r-lib.org/reference/path.html">path</a></span>(t, glue<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span>(<span class="st">"{fid}-taxon_encounter.csv"</span>))</a>
<a class="sourceLine" id="cb10-7" title="7"></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co"># Download the zip file</span></a>
<a class="sourceLine" id="cb10-9" title="9">se &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/submission_export.html">submission_export</a></span>(</a>
<a class="sourceLine" id="cb10-10" title="10">  <span class="dt">local_dir =</span> t,</a>
<a class="sourceLine" id="cb10-11" title="11">  <span class="dt">overwrite =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb10-12" title="12">  <span class="dt">verbose =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb10-13" title="13">)</a>
<a class="sourceLine" id="cb10-14" title="14"><span class="co">#&gt; Keeping previous download: attachments/build_Flora-Quadrat-0-2_1558575936.zip</span></a>
<a class="sourceLine" id="cb10-15" title="15"></a>
<a class="sourceLine" id="cb10-16" title="16"><span class="co"># Unpack the zip file</span></a>
<a class="sourceLine" id="cb10-17" title="17">f &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span>(se, <span class="dt">exdir =</span> t)</a>
<a class="sourceLine" id="cb10-18" title="18">fs<span class="op">::</span><span class="kw"><a href="http://fs.r-lib.org/reference/dir_ls.html">dir_ls</a></span>(t)</a>
<a class="sourceLine" id="cb10-19" title="19"><span class="co">#&gt; attachments/build_Flora-Quadrat-0-2_1558575936-taxon_encounter.csv</span></a>
<a class="sourceLine" id="cb10-20" title="20"><span class="co">#&gt; attachments/build_Flora-Quadrat-0-2_1558575936.csv</span></a>
<a class="sourceLine" id="cb10-21" title="21"><span class="co">#&gt; attachments/build_Flora-Quadrat-0-2_1558575936.zip</span></a>
<a class="sourceLine" id="cb10-22" title="22"><span class="co">#&gt; attachments/c0f9ce58-4388-4e7b-98d7-feac459d2e12</span></a>
<a class="sourceLine" id="cb10-23" title="23"><span class="co">#&gt; attachments/e0375332-0bb5-4175-a498-549bb33420e4</span></a>
<a class="sourceLine" id="cb10-24" title="24"><span class="co">#&gt; attachments/media</span></a>
<a class="sourceLine" id="cb10-25" title="25"></a>
<a class="sourceLine" id="cb10-26" title="26"><span class="co"># Prepend attachments with media/ to turn into relative file paths</span></a>
<a class="sourceLine" id="cb10-27" title="27">data_quadrat &lt;-<span class="st"> </span>fid_csv <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-28" title="28"><span class="st">  </span>readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span>(<span class="dt">na =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">""</span>, <span class="st">"NA"</span>, <span class="st">"na"</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># form uses "na" for NA</span></a>
<a class="sourceLine" id="cb10-29" title="29"><span class="st">  </span>janitor<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span>(.) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-30" title="30"><span class="st">  </span><span class="kw"><a href="../reference/attachment_link.html">attachment_link</a></span>(.) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-31" title="31"><span class="st">  </span><span class="kw"><a href="../reference/parse_datetime.html">parse_datetime</a></span>(<span class="dt">tz =</span> <span class="st">"Australia/Perth"</span>)      <span class="co"># an example timezone</span></a>
<a class="sourceLine" id="cb10-32" title="32"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb10-33" title="33"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb10-34" title="34"><span class="co">#&gt;   .default = col_double(),</span></a>
<a class="sourceLine" id="cb10-35" title="35"><span class="co">#&gt;   SubmissionDate = col_datetime(format = ""),</span></a>
<a class="sourceLine" id="cb10-36" title="36"><span class="co">#&gt;   `meta-instanceID` = col_character(),</span></a>
<a class="sourceLine" id="cb10-37" title="37"><span class="co">#&gt;   encounter_start_datetime = col_datetime(format = ""),</span></a>
<a class="sourceLine" id="cb10-38" title="38"><span class="co">#&gt;   reporter = col_character(),</span></a>
<a class="sourceLine" id="cb10-39" title="39"><span class="co">#&gt;   device_id = col_character(),</span></a>
<a class="sourceLine" id="cb10-40" title="40"><span class="co">#&gt;   `location-area_name` = col_character(),</span></a>
<a class="sourceLine" id="cb10-41" title="41"><span class="co">#&gt;   `location-quadrat_photo` = col_character(),</span></a>
<a class="sourceLine" id="cb10-42" title="42"><span class="co">#&gt;   `habitat-morphological_type` = col_character(),</span></a>
<a class="sourceLine" id="cb10-43" title="43"><span class="co">#&gt;   `habitat-morphological_type_photo` = col_character(),</span></a>
<a class="sourceLine" id="cb10-44" title="44"><span class="co">#&gt;   `vegetation_structure-vegclass_placeholder` = col_character(),</span></a>
<a class="sourceLine" id="cb10-45" title="45"><span class="co">#&gt;   `perimeter-mudmap_photo` = col_character(),</span></a>
<a class="sourceLine" id="cb10-46" title="46"><span class="co">#&gt;   encounter_end_datetime = col_datetime(format = ""),</span></a>
<a class="sourceLine" id="cb10-47" title="47"><span class="co">#&gt;   KEY = col_character(),</span></a>
<a class="sourceLine" id="cb10-48" title="48"><span class="co">#&gt;   SubmitterName = col_character(),</span></a>
<a class="sourceLine" id="cb10-49" title="49"><span class="co">#&gt;   Status = col_character()</span></a>
<a class="sourceLine" id="cb10-50" title="50"><span class="co">#&gt; )</span></a>
<a class="sourceLine" id="cb10-51" title="51"><span class="co">#&gt; See spec(...) for full column specifications.</span></a>
<a class="sourceLine" id="cb10-52" title="52"><span class="co">#&gt; Warning: 2 parsing failures.</span></a>
<a class="sourceLine" id="cb10-53" title="53"><span class="co">#&gt; row col   expected     actual                                                 file</span></a>
<a class="sourceLine" id="cb10-54" title="54"><span class="co">#&gt;   1  -- 32 columns 31 columns 'attachments/build_Flora-Quadrat-0-2_1558575936.csv'</span></a>
<a class="sourceLine" id="cb10-55" title="55"><span class="co">#&gt;   2  -- 32 columns 31 columns 'attachments/build_Flora-Quadrat-0-2_1558575936.csv'</span></a>
<a class="sourceLine" id="cb10-56" title="56"></a>
<a class="sourceLine" id="cb10-57" title="57">DT<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(data_quadrat)</a></code></pre></div>
<div id="htmlwidget-9223eb0150f9d2e7ff14" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9223eb0150f9d2e7ff14">{"x":{"filter":"none","data":[["1","2"],["2019-05-23T03:12:16Z","2019-05-23T03:07:34Z"],["uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12","uuid:e0375332-0bb5-4175-a498-549bb33420e4"],["2019-05-23T02:46:04Z","2019-05-23T02:58:34Z"],["Florian Mayer","Florian Mayer"],["ccb596b33cd13298","351848090572014"],["Kens1","Kens02"],["media/1558579592153.jpg","media/1558580334821.jpg"],[-31.9961844,-31.99620765],[115.8840312,115.88430933],[0,-21],[41.909,12.864],["open-depression","flat"],["media/1558579731266.jpg","media/1558580394989.jpg"],["Lanscaped native shrubs over red gravel","Planter box over concrete pavers"],[-31.9961229,-31.99620102],[115.883982,115.88428661],[0,-22],[40.977,12.864],[-31.9966621,-31.99619855],[115.884307,115.88427853],[0,-22],[60,15.008],[-31.9961278,-31.99617953],[115.8840645,115.88427163],[0,-26],[72.9,9.648001],["media/1558580082333.jpg","media/1558580571494.jpg"],["2019-05-23T02:57:17Z","2019-05-23T03:05:48Z"],["uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12","uuid:e0375332-0bb5-4175-a498-549bb33420e4"],[228,228],["manjimup","manjimup"],[null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>submission_date<\/th>\n      <th>meta_instance_id<\/th>\n      <th>encounter_start_datetime<\/th>\n      <th>reporter<\/th>\n      <th>device_id<\/th>\n      <th>location_area_name<\/th>\n      <th>location_quadrat_photo<\/th>\n      <th>location_corner1_latitude<\/th>\n      <th>location_corner1_longitude<\/th>\n      <th>location_corner1_altitude<\/th>\n      <th>location_corner1_accuracy<\/th>\n      <th>habitat_morphological_type<\/th>\n      <th>habitat_morphological_type_photo<\/th>\n      <th>vegetation_structure_vegclass_placeholder<\/th>\n      <th>perimeter_corner2_latitude<\/th>\n      <th>perimeter_corner2_longitude<\/th>\n      <th>perimeter_corner2_altitude<\/th>\n      <th>perimeter_corner2_accuracy<\/th>\n      <th>perimeter_corner3_latitude<\/th>\n      <th>perimeter_corner3_longitude<\/th>\n      <th>perimeter_corner3_altitude<\/th>\n      <th>perimeter_corner3_accuracy<\/th>\n      <th>perimeter_corner4_latitude<\/th>\n      <th>perimeter_corner4_longitude<\/th>\n      <th>perimeter_corner4_altitude<\/th>\n      <th>perimeter_corner4_accuracy<\/th>\n      <th>perimeter_mudmap_photo<\/th>\n      <th>encounter_end_datetime<\/th>\n      <th>key<\/th>\n      <th>submitter_id<\/th>\n      <th>submitter_name<\/th>\n      <th>status<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,26,30]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co"># Further: create map with popups, see vignette "odata"</span></a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3">data_taxon &lt;-<span class="st"> </span>fid_csv_tae <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span>readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span>(<span class="dt">na =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">""</span>, <span class="st">"NA"</span>, <span class="st">"na"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">  </span>janitor<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span>(.) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/attachment_link.html">attachment_link</a></span>(.) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="st">  </span><span class="kw"><a href="../reference/parse_datetime.html">parse_datetime</a></span>(<span class="dt">tz =</span> <span class="st">"Australia/Perth"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(data_quadrat, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"parent_key"</span> =<span class="st"> "meta_instance_id"</span>))</a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co">#&gt;   canonical_name = col_character(),</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="co">#&gt;   photo_in_situ = col_character(),</span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="co">#&gt;   `taxon_encounter_location-Latitude` = col_double(),</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co">#&gt;   `taxon_encounter_location-Longitude` = col_double(),</span></a>
<a class="sourceLine" id="cb11-15" title="15"><span class="co">#&gt;   `taxon_encounter_location-Altitude` = col_double(),</span></a>
<a class="sourceLine" id="cb11-16" title="16"><span class="co">#&gt;   `taxon_encounter_location-Accuracy` = col_double(),</span></a>
<a class="sourceLine" id="cb11-17" title="17"><span class="co">#&gt;   life_form = col_character(),</span></a>
<a class="sourceLine" id="cb11-18" title="18"><span class="co">#&gt;   voucher_specimen_barcode = col_double(),</span></a>
<a class="sourceLine" id="cb11-19" title="19"><span class="co">#&gt;   PARENT_KEY = col_character(),</span></a>
<a class="sourceLine" id="cb11-20" title="20"><span class="co">#&gt;   KEY = col_character()</span></a>
<a class="sourceLine" id="cb11-21" title="21"><span class="co">#&gt; )</span></a>
<a class="sourceLine" id="cb11-22" title="22"></a>
<a class="sourceLine" id="cb11-23" title="23">DT<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(data_taxon)</a></code></pre></div>
<div id="htmlwidget-843199ad2c0d17a80fcf" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-843199ad2c0d17a80fcf">{"x":{"filter":"none","data":[["1","2","3","4"],["Grevillea","Dontknowsiana sp.","Species 1","Species2"],["media/1558580116374.jpg","media/1558580178316.jpg","media/1558580622081.jpg","media/1558580706298.jpg"],[-31.9961627,-31.9963167,-31.99617267,-31.99615233],[115.8841655,115.8843675,115.88431406,115.884342],[0,0,-13,-8],[56.1,40.519,5.36,4.288],["shrub","tree","shrub","shrub"],[9311960202528,9311960202528,9311960202528,9311960202528],["uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12","uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12","uuid:e0375332-0bb5-4175-a498-549bb33420e4","uuid:e0375332-0bb5-4175-a498-549bb33420e4"],["uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12/taxon_encounter[1]","uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12/taxon_encounter[2]","uuid:e0375332-0bb5-4175-a498-549bb33420e4/taxon_encounter[1]","uuid:e0375332-0bb5-4175-a498-549bb33420e4/taxon_encounter[2]"],["2019-05-23T03:12:16Z","2019-05-23T03:12:16Z","2019-05-23T03:07:34Z","2019-05-23T03:07:34Z"],["2019-05-23T02:46:04Z","2019-05-23T02:46:04Z","2019-05-23T02:58:34Z","2019-05-23T02:58:34Z"],["Florian Mayer","Florian Mayer","Florian Mayer","Florian Mayer"],["ccb596b33cd13298","ccb596b33cd13298","351848090572014","351848090572014"],["Kens1","Kens1","Kens02","Kens02"],["media/1558579592153.jpg","media/1558579592153.jpg","media/1558580334821.jpg","media/1558580334821.jpg"],[-31.9961844,-31.9961844,-31.99620765,-31.99620765],[115.8840312,115.8840312,115.88430933,115.88430933],[0,0,-21,-21],[41.909,41.909,12.864,12.864],["open-depression","open-depression","flat","flat"],["media/1558579731266.jpg","media/1558579731266.jpg","media/1558580394989.jpg","media/1558580394989.jpg"],["Lanscaped native shrubs over red gravel","Lanscaped native shrubs over red gravel","Planter box over concrete pavers","Planter box over concrete pavers"],[-31.9961229,-31.9961229,-31.99620102,-31.99620102],[115.883982,115.883982,115.88428661,115.88428661],[0,0,-22,-22],[40.977,40.977,12.864,12.864],[-31.9966621,-31.9966621,-31.99619855,-31.99619855],[115.884307,115.884307,115.88427853,115.88427853],[0,0,-22,-22],[60,60,15.008,15.008],[-31.9961278,-31.9961278,-31.99617953,-31.99617953],[115.8840645,115.8840645,115.88427163,115.88427163],[0,0,-26,-26],[72.9,72.9,9.648001,9.648001],["media/1558580082333.jpg","media/1558580082333.jpg","media/1558580571494.jpg","media/1558580571494.jpg"],["2019-05-23T02:57:17Z","2019-05-23T02:57:17Z","2019-05-23T03:05:48Z","2019-05-23T03:05:48Z"],["uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12","uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12","uuid:e0375332-0bb5-4175-a498-549bb33420e4","uuid:e0375332-0bb5-4175-a498-549bb33420e4"],[228,228,228,228],["manjimup","manjimup","manjimup","manjimup"],[null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>canonical_name<\/th>\n      <th>photo_in_situ<\/th>\n      <th>taxon_encounter_location_latitude<\/th>\n      <th>taxon_encounter_location_longitude<\/th>\n      <th>taxon_encounter_location_altitude<\/th>\n      <th>taxon_encounter_location_accuracy<\/th>\n      <th>life_form<\/th>\n      <th>voucher_specimen_barcode<\/th>\n      <th>parent_key<\/th>\n      <th>key.x<\/th>\n      <th>submission_date<\/th>\n      <th>encounter_start_datetime<\/th>\n      <th>reporter<\/th>\n      <th>device_id<\/th>\n      <th>location_area_name<\/th>\n      <th>location_quadrat_photo<\/th>\n      <th>location_corner1_latitude<\/th>\n      <th>location_corner1_longitude<\/th>\n      <th>location_corner1_altitude<\/th>\n      <th>location_corner1_accuracy<\/th>\n      <th>habitat_morphological_type<\/th>\n      <th>habitat_morphological_type_photo<\/th>\n      <th>vegetation_structure_vegclass_placeholder<\/th>\n      <th>perimeter_corner2_latitude<\/th>\n      <th>perimeter_corner2_longitude<\/th>\n      <th>perimeter_corner2_altitude<\/th>\n      <th>perimeter_corner2_accuracy<\/th>\n      <th>perimeter_corner3_latitude<\/th>\n      <th>perimeter_corner3_longitude<\/th>\n      <th>perimeter_corner3_altitude<\/th>\n      <th>perimeter_corner3_accuracy<\/th>\n      <th>perimeter_corner4_latitude<\/th>\n      <th>perimeter_corner4_longitude<\/th>\n      <th>perimeter_corner4_altitude<\/th>\n      <th>perimeter_corner4_accuracy<\/th>\n      <th>perimeter_mudmap_photo<\/th>\n      <th>encounter_end_datetime<\/th>\n      <th>key.y<\/th>\n      <th>submitter_id<\/th>\n      <th>submitter_name<\/th>\n      <th>status<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,8,17,18,19,20,24,25,26,27,28,29,30,31,32,33,34,35,39]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># Further: create map with popups, see vignette "odata"</span></a></code></pre></div>
</div>
<div id="list-submissions-for-one-form" class="section level2">
<h2 class="hasAnchor">
<a href="#list-submissions-for-one-form" class="anchor"></a>List submissions for one form</h2>
<p>Not always is it appropriate to download all submissions and all attachments at once.</p>
<p>If forms feed into downstream data warehouses, the typical ETL workflow is to</p>
<ul>
<li>List all submissions from ODK Central</li>
<li>Select the subset of new submissions to download, e.g.
<ul>
<li>Submissions younger than the oldest submission date in the data warehouse.</li>
<li>Submissions whose <code>instance_id</code> is not already present in the data warehouse.</li>
</ul>
</li>
<li>Download only the selected submissions.</li>
<li>Download attachments of only the selected submissions.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">sl &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/submission_list.html">submission_list</a></span>()</a>
<a class="sourceLine" id="cb13-2" title="2">sl <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">instance_id</th>
<th align="right">submitter_id</th>
<th align="left">device_id</th>
<th align="left">created_at</th>
<th align="left">updated_at</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12</td>
<td align="right">228</td>
<td align="left">android_id:ccb596b33cd13298</td>
<td align="left">2019-05-23 03:12:16</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">uuid:e0375332-0bb5-4175-a498-549bb33420e4</td>
<td align="right">228</td>
<td align="left">imei:351848090572014</td>
<td align="left">2019-05-23 03:07:34</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>The list of submissions critically contains each submission’s unique ID in <code>instance_id</code>. If the submissions shall be downloaded and uploaded into another data warehouse, the <code>instance_id</code> can be used to determine whether a record already exists in the downstream warehouse or not. This workflow is preferable where the majority of submissions is already imported into another downstream data warehouse, and we only want to add new submissions, as in submissions which are not already imported into the data warehouse.</p>
<p>Furthermore, the <code>instance_id</code>s can now be used to retrieve the actual submissions.</p>
<p>A quick detour on submission metadata:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># One submission</span></a>
<a class="sourceLine" id="cb14-2" title="2">sub_meta &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/submission_detail.html">submission_detail</a></span>(sl<span class="op">$</span>instance_id[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co"># Multiple submissions</span></a>
<a class="sourceLine" id="cb14-5" title="5">submissions_meta &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb14-6" title="6">  <span class="dt">pid =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_pid</a></span>(),</a>
<a class="sourceLine" id="cb14-7" title="7">  <span class="dt">fid =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_fid</a></span>(),</a>
<a class="sourceLine" id="cb14-8" title="8">  <span class="dt">iid =</span> sl<span class="op">$</span>instance_id,  <span class="co"># this is a vector of multiple instance_ids</span></a>
<a class="sourceLine" id="cb14-9" title="9">  <span class="dt">url =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_url</a></span>(),</a>
<a class="sourceLine" id="cb14-10" title="10">  <span class="dt">un =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_un</a></span>(),</a>
<a class="sourceLine" id="cb14-11" title="11">  <span class="dt">pw =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_pw</a></span>()</a>
<a class="sourceLine" id="cb14-12" title="12">) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="st">  </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map2.html">pmap</a></span>(ruODK<span class="op">::</span>submission_detail)</a>
<a class="sourceLine" id="cb14-14" title="14">submissions_meta <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">instance_id</th>
<th align="right">submitter_id</th>
<th align="left">submitter</th>
<th align="left">created_at</th>
<th align="left">updated_at</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12</td>
<td align="right">228</td>
<td align="left">manjimup</td>
<td align="left">2019-05-23 03:12:16</td>
<td align="left">NA</td>
</tr></tbody>
</table>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">instance_id</th>
<th align="right">submitter_id</th>
<th align="left">submitter</th>
<th align="left">created_at</th>
<th align="left">updated_at</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">uuid:e0375332-0bb5-4175-a498-549bb33420e4</td>
<td align="right">228</td>
<td align="left">manjimup</td>
<td align="left">2019-05-23 03:07:34</td>
<td align="left">NA</td>
</tr></tbody>
</table>
</td>
</tr></tbody></table>
<p>Nothing new there compared to <code>submission_list</code>, so let’s move on to the actual submission data.</p>
</div>
<div id="get-submission-data" class="section level2">
<h2 class="hasAnchor">
<a href="#get-submission-data" class="anchor"></a>Get submission data</h2>
<p>In order to import each submission, we need to retrieve the data by <code>instance_id</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># One submission</span></a>
<a class="sourceLine" id="cb15-2" title="2">sub &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/submission_get.html">submission_get</a></span>(sl<span class="op">$</span>instance_id[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb15-3" title="3"></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="co"># Multiple submissions</span></a>
<a class="sourceLine" id="cb15-5" title="5">submissions &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="dt">pid =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_pid</a></span>(),</a>
<a class="sourceLine" id="cb15-7" title="7">  <span class="dt">fid =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_fid</a></span>(),</a>
<a class="sourceLine" id="cb15-8" title="8">  <span class="dt">iid =</span> sl<span class="op">$</span>instance_id,  <span class="co"># this is a vector of multiple instance_ids</span></a>
<a class="sourceLine" id="cb15-9" title="9">  <span class="dt">url =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_url</a></span>(),</a>
<a class="sourceLine" id="cb15-10" title="10">  <span class="dt">un =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_un</a></span>(),</a>
<a class="sourceLine" id="cb15-11" title="11">  <span class="dt">pw =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_pw</a></span>()</a>
<a class="sourceLine" id="cb15-12" title="12">) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-13" title="13"><span class="st">  </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map2.html">pmap</a></span>(ruODK<span class="op">::</span>submission_get)</a></code></pre></div>
</div>
<div id="parse-submissions" class="section level2">
<h2 class="hasAnchor">
<a href="#parse-submissions" class="anchor"></a>Parse submissions</h2>
<p>The data in <code>sub</code> is one row of the bulk downloaded submissions in <code>data_quadrat</code>. The data in <code>submissions</code> represents all (or let’s pretend, the selected) submissions in <code>data_quadrat</code>. The field <code>xml</code> contains the actual submission data including repeating groups.</p>
<p>The structure is different to the output of <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get</a></code>, therefore <code><a href="../reference/odata_submission_parse.html">ruODK::odata_submission_parse</a></code> does not work for those, as here we might have repeating groups included in a submission.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">listviewer<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/listviewer/man/jsonedit.html">jsonedit</a></span>(submissions, <span class="dt">mode =</span> <span class="st">"code"</span>)</a></code></pre></div>
<div id="htmlwidget-4a722d27a4eafdfb4c5e" style="width:700px;height:432.632880098888px;" class="jsonedit html-widget"></div>
<script type="application/json" data-for="htmlwidget-4a722d27a4eafdfb4c5e">{"x":{"data":[{"meta":{"instanceID":["uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12"]},"encounter_start_datetime":["2019-05-23T10:46:04.821+08:00"],"reporter":["Florian Mayer"],"device_id":["ccb596b33cd13298"],"location":{"area_name":["Kens1"],"quadrat_photo":["1558579592153.jpg"],"corner1":["-31.9961844 115.8840312 0.0 41.909"]},"habitat":{"morphological_type":["open-depression"],"morphological_type_photo":["1558579731266.jpg"]},"vegetation_structure":{"vegclass_placeholder":["Lanscaped native shrubs over red gravel"]},"perimeter":{"corner2":["-31.9961229 115.883982 0.0 40.977"],"corner3":["-31.9966621 115.884307 0.0 60.0"],"corner4":["-31.9961278 115.8840645 0.0 72.9"],"mudmap_photo":["1558580082333.jpg"]},"taxon_encounter":{"canonical_name":["Grevillea"],"photo_in_situ":["1558580116374.jpg"],"taxon_encounter_location":["-31.9961627 115.8841655 0.0 56.1"],"life_form":["shrub"],"voucher_specimen_barcode":["9311960202528"]},"taxon_encounter.1":{"canonical_name":["Dontknowsiana sp."],"photo_in_situ":["1558580178316.jpg"],"taxon_encounter_location":["-31.9963167 115.8843675 0.0 40.519"],"life_form":["tree"],"voucher_specimen_barcode":["9311960202528"]},"encounter_end_datetime":["2019-05-23T10:57:17.184+08:00"]},{"meta":{"instanceID":["uuid:e0375332-0bb5-4175-a498-549bb33420e4"]},"encounter_start_datetime":["2019-05-23T10:58:34.541+08:00"],"reporter":["Florian Mayer"],"device_id":["351848090572014"],"location":{"area_name":["Kens02"],"quadrat_photo":["1558580334821.jpg"],"corner1":["-31.99620765 115.88430933 -21.0 12.864"]},"habitat":{"morphological_type":["flat"],"morphological_type_photo":["1558580394989.jpg"]},"vegetation_structure":{"vegclass_placeholder":["Planter box over concrete pavers"]},"perimeter":{"corner2":["-31.99620102 115.88428661 -22.0 12.864"],"corner3":["-31.99619855 115.88427853 -22.0 15.008"],"corner4":["-31.99617953 115.88427163 -26.0 9.648001"],"mudmap_photo":["1558580571494.jpg"]},"taxon_encounter":{"canonical_name":["Species 1"],"photo_in_situ":["1558580622081.jpg"],"taxon_encounter_location":["-31.99617267 115.88431406 -13.0 5.36"],"life_form":["shrub"],"voucher_specimen_barcode":["9311960202528"]},"taxon_encounter.1":{"canonical_name":["Species2"],"photo_in_situ":["1558580706298.jpg"],"taxon_encounter_location":["-31.99615233 115.884342 -8.0 4.288"],"life_form":["shrub"],"voucher_specimen_barcode":["9311960202528"]},"encounter_end_datetime":["2019-05-23T11:05:48.371+08:00"]}],"options":{"mode":"code","modes":["code","form","text","tree","view"]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="rectangling-the-submissions" class="section level2">
<h2 class="hasAnchor">
<a href="#rectangling-the-submissions" class="anchor"></a>Rectangling the submissions</h2>
<p>Here we’ll un-nest the nested list of submission data into a rectangular <code>tibble</code>.</p>
<p>In the example shown above, the repeated <code>taxon_encounter</code> groups are named <code>taxon_encounter</code>, <code>taxon_encounter.1</code> and so on. This is an artifact of the <code>jsonedit::listviewer()</code> widget.</p>
<p>With one additional step we can flatten the nested lists and bind them into one dataframe, then sanitise the column names and parse datetimes like we did with the CSV export.</p>
<p>It appears this operation loses all but the last repeat of repeating groups. We should further also deparse locations (WKT) into latitude, longitude, altitude and accuracy.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">sub_parsed &lt;-<span class="st"> </span>submissions <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="st">  </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_df</a></span>(rlist<span class="op">::</span>list.flatten) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="st">  </span>janitor<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span>(.) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="st">  </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/parse_datetime.html">parse_datetime</a></span>(.)</a>
<a class="sourceLine" id="cb17-5" title="5"></a>
<a class="sourceLine" id="cb17-6" title="6"><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(sub_parsed)</a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co">#&gt;  [1] "meta_instance_id"                         </span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="co">#&gt;  [2] "encounter_start_datetime"                 </span></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="co">#&gt;  [3] "reporter"                                 </span></a>
<a class="sourceLine" id="cb17-10" title="10"><span class="co">#&gt;  [4] "device_id"                                </span></a>
<a class="sourceLine" id="cb17-11" title="11"><span class="co">#&gt;  [5] "location_area_name"                       </span></a>
<a class="sourceLine" id="cb17-12" title="12"><span class="co">#&gt;  [6] "location_quadrat_photo"                   </span></a>
<a class="sourceLine" id="cb17-13" title="13"><span class="co">#&gt;  [7] "location_corner1"                         </span></a>
<a class="sourceLine" id="cb17-14" title="14"><span class="co">#&gt;  [8] "habitat_morphological_type"               </span></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="co">#&gt;  [9] "habitat_morphological_type_photo"         </span></a>
<a class="sourceLine" id="cb17-16" title="16"><span class="co">#&gt; [10] "vegetation_structure_vegclass_placeholder"</span></a>
<a class="sourceLine" id="cb17-17" title="17"><span class="co">#&gt; [11] "perimeter_corner2"                        </span></a>
<a class="sourceLine" id="cb17-18" title="18"><span class="co">#&gt; [12] "perimeter_corner3"                        </span></a>
<a class="sourceLine" id="cb17-19" title="19"><span class="co">#&gt; [13] "perimeter_corner4"                        </span></a>
<a class="sourceLine" id="cb17-20" title="20"><span class="co">#&gt; [14] "perimeter_mudmap_photo"                   </span></a>
<a class="sourceLine" id="cb17-21" title="21"><span class="co">#&gt; [15] "taxon_encounter_canonical_name"           </span></a>
<a class="sourceLine" id="cb17-22" title="22"><span class="co">#&gt; [16] "taxon_encounter_photo_in_situ"            </span></a>
<a class="sourceLine" id="cb17-23" title="23"><span class="co">#&gt; [17] "taxon_encounter_taxon_encounter_location" </span></a>
<a class="sourceLine" id="cb17-24" title="24"><span class="co">#&gt; [18] "taxon_encounter_life_form"                </span></a>
<a class="sourceLine" id="cb17-25" title="25"><span class="co">#&gt; [19] "taxon_encounter_voucher_specimen_barcode" </span></a>
<a class="sourceLine" id="cb17-26" title="26"><span class="co">#&gt; [20] "encounter_end_datetime"</span></a>
<a class="sourceLine" id="cb17-27" title="27">sub_parsed <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">meta_instance_id</th>
<th align="left">encounter_start_datetime</th>
<th align="left">reporter</th>
<th align="left">device_id</th>
<th align="left">location_area_name</th>
<th align="left">location_quadrat_photo</th>
<th align="left">location_corner1</th>
<th align="left">habitat_morphological_type</th>
<th align="left">habitat_morphological_type_photo</th>
<th align="left">vegetation_structure_vegclass_placeholder</th>
<th align="left">perimeter_corner2</th>
<th align="left">perimeter_corner3</th>
<th align="left">perimeter_corner4</th>
<th align="left">perimeter_mudmap_photo</th>
<th align="left">taxon_encounter_canonical_name</th>
<th align="left">taxon_encounter_photo_in_situ</th>
<th align="left">taxon_encounter_taxon_encounter_location</th>
<th align="left">taxon_encounter_life_form</th>
<th align="left">taxon_encounter_voucher_specimen_barcode</th>
<th align="left">encounter_end_datetime</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">uuid:c0f9ce58-4388-4e7b-98d7-feac459d2e12</td>
<td align="left">2019-05-23 10:46:04</td>
<td align="left">Florian Mayer</td>
<td align="left">ccb596b33cd13298</td>
<td align="left">Kens1</td>
<td align="left">1558579592153.jpg</td>
<td align="left">-31.9961844 115.8840312 0.0 41.909</td>
<td align="left">open-depression</td>
<td align="left">1558579731266.jpg</td>
<td align="left">Lanscaped native shrubs over red gravel</td>
<td align="left">-31.9961229 115.883982 0.0 40.977</td>
<td align="left">-31.9966621 115.884307 0.0 60.0</td>
<td align="left">-31.9961278 115.8840645 0.0 72.9</td>
<td align="left">1558580082333.jpg</td>
<td align="left">Dontknowsiana sp.</td>
<td align="left">1558580178316.jpg</td>
<td align="left">-31.9963167 115.8843675 0.0 40.519</td>
<td align="left">tree</td>
<td align="left">9311960202528</td>
<td align="left">2019-05-23 10:57:17</td>
</tr>
<tr class="even">
<td align="left">uuid:e0375332-0bb5-4175-a498-549bb33420e4</td>
<td align="left">2019-05-23 10:58:34</td>
<td align="left">Florian Mayer</td>
<td align="left">351848090572014</td>
<td align="left">Kens02</td>
<td align="left">1558580334821.jpg</td>
<td align="left">-31.99620765 115.88430933 -21.0 12.864</td>
<td align="left">flat</td>
<td align="left">1558580394989.jpg</td>
<td align="left">Planter box over concrete pavers</td>
<td align="left">-31.99620102 115.88428661 -22.0 12.864</td>
<td align="left">-31.99619855 115.88427853 -22.0 15.008</td>
<td align="left">-31.99617953 115.88427163 -26.0 9.648001</td>
<td align="left">1558580571494.jpg</td>
<td align="left">Species2</td>
<td align="left">1558580706298.jpg</td>
<td align="left">-31.99615233 115.884342 -8.0 4.288</td>
<td align="left">shrub</td>
<td align="left">9311960202528</td>
<td align="left">2019-05-23 11:05:48</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="attachments" class="section level1">
<h1 class="hasAnchor">
<a href="#attachments" class="anchor"></a>Attachments</h1>
<div id="list-all-attachments-for-one-form" class="section level2">
<h2 class="hasAnchor">
<a href="#list-all-attachments-for-one-form" class="anchor"></a>List all attachments for one form</h2>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">al &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/attachment_list.html">attachment_list</a></span>(sl<span class="op">$</span>instance_id[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb18-2" title="2">al</a>
<a class="sourceLine" id="cb18-3" title="3"><span class="co">#&gt; # A tibble: 5 x 2</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="co">#&gt;   name              exists</span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="co">#&gt;   &lt;chr&gt;             &lt;lgl&gt; </span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">#&gt; 1 1558579592153.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">#&gt; 2 1558579731266.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="co">#&gt; 3 1558580082333.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="co">#&gt; 4 1558580116374.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="co">#&gt; 5 1558580178316.jpg TRUE</span></a>
<a class="sourceLine" id="cb18-11" title="11"></a>
<a class="sourceLine" id="cb18-12" title="12">attachments &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb18-13" title="13">  <span class="dt">pid =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_pid</a></span>(),</a>
<a class="sourceLine" id="cb18-14" title="14">  <span class="dt">fid =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_fid</a></span>(),</a>
<a class="sourceLine" id="cb18-15" title="15">  <span class="dt">iid =</span> sl<span class="op">$</span>instance_id,  <span class="co"># this is a vector of multiple instance_ids</span></a>
<a class="sourceLine" id="cb18-16" title="16">  <span class="dt">url =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_url</a></span>(),</a>
<a class="sourceLine" id="cb18-17" title="17">  <span class="dt">un =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_un</a></span>(),</a>
<a class="sourceLine" id="cb18-18" title="18">  <span class="dt">pw =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_settings.html">get_test_pw</a></span>()</a>
<a class="sourceLine" id="cb18-19" title="19">) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-20" title="20"><span class="st">  </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map2.html">pmap</a></span>(ruODK<span class="op">::</span>attachment_list)</a>
<a class="sourceLine" id="cb18-21" title="21">attachments</a>
<a class="sourceLine" id="cb18-22" title="22"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb18-23" title="23"><span class="co">#&gt; # A tibble: 5 x 2</span></a>
<a class="sourceLine" id="cb18-24" title="24"><span class="co">#&gt;   name              exists</span></a>
<a class="sourceLine" id="cb18-25" title="25"><span class="co">#&gt;   &lt;chr&gt;             &lt;lgl&gt; </span></a>
<a class="sourceLine" id="cb18-26" title="26"><span class="co">#&gt; 1 1558579592153.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-27" title="27"><span class="co">#&gt; 2 1558579731266.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-28" title="28"><span class="co">#&gt; 3 1558580082333.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-29" title="29"><span class="co">#&gt; 4 1558580116374.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-30" title="30"><span class="co">#&gt; 5 1558580178316.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-31" title="31"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb18-32" title="32"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb18-33" title="33"><span class="co">#&gt; # A tibble: 5 x 2</span></a>
<a class="sourceLine" id="cb18-34" title="34"><span class="co">#&gt;   name              exists</span></a>
<a class="sourceLine" id="cb18-35" title="35"><span class="co">#&gt;   &lt;chr&gt;             &lt;lgl&gt; </span></a>
<a class="sourceLine" id="cb18-36" title="36"><span class="co">#&gt; 1 1558580334821.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-37" title="37"><span class="co">#&gt; 2 1558580394989.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-38" title="38"><span class="co">#&gt; 3 1558580571494.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-39" title="39"><span class="co">#&gt; 4 1558580622081.jpg TRUE  </span></a>
<a class="sourceLine" id="cb18-40" title="40"><span class="co">#&gt; 5 1558580706298.jpg TRUE</span></a></code></pre></div>
</div>
<div id="get-attachments" class="section level2">
<h2 class="hasAnchor">
<a href="#get-attachments" class="anchor"></a>Get attachments</h2>
<p>While we’re working on parsing the submissions into something resembling <code>data_quadrat</code>, we’ll demonstrate the use of <code><a href="../reference/attachment_get.html">ruODK::attachment_get</a></code> using <code>data_quadrat_raw</code>, which still contains the plain filenames without prefixed local folders.</p>
<p><code><a href="../reference/attachment_get.html">ruODK::attachment_get</a></code> downloads the attachment files and links them similar to <code><a href="../reference/attachment_link.html">ruODK::attachment_link</a></code> (which assumes that attachments are already downloaded).</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">sub_att &lt;-<span class="st"> </span>sub_parsed <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(</a>
<a class="sourceLine" id="cb19-3" title="3">    <span class="dt">location_quadrat_photo =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/attachment_get.html">attachment_get</a></span>(</a>
<a class="sourceLine" id="cb19-4" title="4">        meta_instance_id,</a>
<a class="sourceLine" id="cb19-5" title="5">        location_quadrat_photo,</a>
<a class="sourceLine" id="cb19-6" title="6">        <span class="dt">local_dir =</span> t</a>
<a class="sourceLine" id="cb19-7" title="7">    )</a>
<a class="sourceLine" id="cb19-8" title="8">    <span class="co"># same for all other attachments</span></a>
<a class="sourceLine" id="cb19-9" title="9">    <span class="co"># requires knowledge or introspection of form schema</span></a>
<a class="sourceLine" id="cb19-10" title="10">  )</a>
<a class="sourceLine" id="cb19-11" title="11"></a>
<a class="sourceLine" id="cb19-12" title="12"><span class="co"># We have file paths...</span></a>
<a class="sourceLine" id="cb19-13" title="13">sub_att<span class="op">$</span>location_quadrat_photo</a>
<a class="sourceLine" id="cb19-14" title="14"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb19-15" title="15"><span class="co">#&gt; [1] "attachments/c0f9ce58-4388-4e7b-98d7-feac459d2e12/1558579592153.jpg"</span></a>
<a class="sourceLine" id="cb19-16" title="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb19-17" title="17"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb19-18" title="18"><span class="co">#&gt; [1] "attachments/e0375332-0bb5-4175-a498-549bb33420e4/1558580334821.jpg"</span></a>
<a class="sourceLine" id="cb19-19" title="19"></a>
<a class="sourceLine" id="cb19-20" title="20"><span class="co"># ...and the corresponding files</span></a>
<a class="sourceLine" id="cb19-21" title="21">fs<span class="op">::</span><span class="kw"><a href="http://fs.r-lib.org/reference/dir_ls.html">dir_ls</a></span>(t, <span class="dt">recurse =</span> <span class="ot">TRUE</span>, <span class="dt">glob =</span> <span class="st">"*.jpg"</span>)</a>
<a class="sourceLine" id="cb19-22" title="22"><span class="co">#&gt; attachments/c0f9ce58-4388-4e7b-98d7-feac459d2e12/1558579592153.jpg</span></a>
<a class="sourceLine" id="cb19-23" title="23"><span class="co">#&gt; attachments/c0f9ce58-4388-4e7b-98d7-feac459d2e12/1558579731266.jpg</span></a>
<a class="sourceLine" id="cb19-24" title="24"><span class="co">#&gt; attachments/c0f9ce58-4388-4e7b-98d7-feac459d2e12/1558580082333.jpg</span></a>
<a class="sourceLine" id="cb19-25" title="25"><span class="co">#&gt; attachments/c0f9ce58-4388-4e7b-98d7-feac459d2e12/1558580116374.jpg</span></a>
<a class="sourceLine" id="cb19-26" title="26"><span class="co">#&gt; attachments/c0f9ce58-4388-4e7b-98d7-feac459d2e12/1558580178316.jpg</span></a>
<a class="sourceLine" id="cb19-27" title="27"><span class="co">#&gt; attachments/e0375332-0bb5-4175-a498-549bb33420e4/1558580334821.jpg</span></a>
<a class="sourceLine" id="cb19-28" title="28"><span class="co">#&gt; attachments/e0375332-0bb5-4175-a498-549bb33420e4/1558580394989.jpg</span></a>
<a class="sourceLine" id="cb19-29" title="29"><span class="co">#&gt; attachments/e0375332-0bb5-4175-a498-549bb33420e4/1558580571494.jpg</span></a>
<a class="sourceLine" id="cb19-30" title="30"><span class="co">#&gt; attachments/e0375332-0bb5-4175-a498-549bb33420e4/1558580622081.jpg</span></a>
<a class="sourceLine" id="cb19-31" title="31"><span class="co">#&gt; attachments/e0375332-0bb5-4175-a498-549bb33420e4/1558580706298.jpg</span></a>
<a class="sourceLine" id="cb19-32" title="32"><span class="co">#&gt; attachments/media/1558579592153.jpg</span></a>
<a class="sourceLine" id="cb19-33" title="33"><span class="co">#&gt; attachments/media/1558579731266.jpg</span></a>
<a class="sourceLine" id="cb19-34" title="34"><span class="co">#&gt; attachments/media/1558580082333.jpg</span></a>
<a class="sourceLine" id="cb19-35" title="35"><span class="co">#&gt; attachments/media/1558580116374.jpg</span></a>
<a class="sourceLine" id="cb19-36" title="36"><span class="co">#&gt; attachments/media/1558580178316.jpg</span></a>
<a class="sourceLine" id="cb19-37" title="37"><span class="co">#&gt; attachments/media/1558580334821.jpg</span></a>
<a class="sourceLine" id="cb19-38" title="38"><span class="co">#&gt; attachments/media/1558580394989.jpg</span></a>
<a class="sourceLine" id="cb19-39" title="39"><span class="co">#&gt; attachments/media/1558580571494.jpg</span></a>
<a class="sourceLine" id="cb19-40" title="40"><span class="co">#&gt; attachments/media/1558580622081.jpg</span></a>
<a class="sourceLine" id="cb19-41" title="41"><span class="co">#&gt; attachments/media/1558580706298.jpg</span></a></code></pre></div>
</div>
</div>
<div id="outlook" class="section level1">
<h1 class="hasAnchor">
<a href="#outlook" class="anchor"></a>Outlook</h1>
<p>From here, we can use the separately created data tibbles and locally downloaded attachments to build visualisations as shown in the vignette “odata”.</p>
<p>The best course of action seems to be the data export to ZIP.</p>
</div>
<div id="future-development" class="section level1">
<h1 class="hasAnchor">
<a href="#future-development" class="anchor"></a>Future development</h1>
<p>In future versions of <code>ruODK</code>, we’ll introspect <code>form_schema</code> to determine the names of repeating groups, the form field names of attachments (data type “binary” in form schema), the form field names of date/time fields (data type “dateTime”), and use this introspection to further automate the data extraction process shown above.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#scope">Scope</a><ul class="nav nav-pills nav-stacked">
<li><a href="#three-ways-to-happiness">Three ways to happiness</a></li>
      </ul>
</li>
      <li><a href="#setup-ruodk">Setup ruODK</a></li>
      <li><a href="#projects">Projects</a></li>
      <li>
<a href="#forms">Forms</a><ul class="nav nav-pills nav-stacked">
<li><a href="#list-forms-for-a-project">List forms for a project</a></li>
      <li><a href="#inspect-form-schema">Inspect form schema</a></li>
      <li><a href="#show-details-of-one-form">Show details of one form</a></li>
      </ul>
</li>
      <li>
<a href="#submissions">Submissions</a><ul class="nav nav-pills nav-stacked">
<li><a href="#get-all-submissions-for-one-form">Get all submissions for one form</a></li>
      <li><a href="#list-submissions-for-one-form">List submissions for one form</a></li>
      <li><a href="#get-submission-data">Get submission data</a></li>
      <li><a href="#parse-submissions">Parse submissions</a></li>
      <li><a href="#rectangling-the-submissions">Rectangling the submissions</a></li>
      </ul>
</li>
      <li>
<a href="#attachments">Attachments</a><ul class="nav nav-pills nav-stacked">
<li><a href="#list-all-attachments-for-one-form">List all attachments for one form</a></li>
      <li><a href="#get-attachments">Get attachments</a></li>
      </ul>
</li>
      <li><a href="#outlook">Outlook</a></li>
      <li><a href="#future-development">Future development</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Florian W. Mayer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
