<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing the OData API • ruODK</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Accessing the OData API">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ruODK</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.6.9009</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/odata-api.html">Accessing the OData API</a>
    </li>
    <li>
      <a href="../articles/restful-api.html">Accessing the RESTful API</a>
    </li>
    <li>
      <a href="../articles/setup.html">Setup</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dbca-wa/ruODK">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="odata-api_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><link href="odata-api_files/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet">
<script src="odata-api_files/jsoneditor-5.25.6/jsoneditor.min.js"></script><script src="odata-api_files/jsonedit-binding-3.0.0/jsonedit.js"></script><script src="odata-api_files/jquery-1.12.4/jquery.min.js"></script><link href="odata-api_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="odata-api_files/datatables-binding-0.11/datatables.js"></script><link href="odata-api_files/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="odata-api_files/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="odata-api_files/dt-core-1.10.19/js/jquery.dataTables.min.js"></script><link href="odata-api_files/crosstalk-1.0.1.9000/css/crosstalk.css" rel="stylesheet">
<script src="odata-api_files/crosstalk-1.0.1.9000/js/crosstalk.min.js"></script><link href="odata-api_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="odata-api_files/leaflet-1.3.1/leaflet.js"></script><link href="odata-api_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="odata-api_files/Proj4Leaflet-1.0.1/proj4-compressed.js"></script><script src="odata-api_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="odata-api_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="odata-api_files/leaflet-binding-2.0.3/leaflet.js"></script><script src="odata-api_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="odata-api_files/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script><link href="odata-api_files/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet">
<script src="odata-api_files/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script><link href="odata-api_files/bootstrap-3.3.7/bootstrap.min.css" rel="stylesheet">
<script src="odata-api_files/bootstrap-3.3.7/bootstrap.min.js"></script><link href="odata-api_files/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet">
<link href="odata-api_files/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet">
<script src="odata-api_files/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script><script src="odata-api_files/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script><script src="odata-api_files/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Accessing the OData API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbca-wa/ruODK/blob/master/vignettes/odata-api.Rmd"><code>vignettes/odata-api.Rmd</code></a></small>
      <div class="hidden name"><code>odata-api.Rmd</code></div>

    </div>

    
    
<p>This vignette demonstrates <code>ruODK</code>’s workflow to extract data from ODK Central’s OData service endpoint, and to prepare the data and the media attachments for further analysis and visualisation.</p>
<p>The demonstrated workflow is roughly equivalent to ODK Central’s “Export all data”, which downloads all submissions and all repeating subgroups as CSV spreadsheets, and all media attachments in a local subfolder “attachments”.</p>
<p>An alternative pathway to getting data out of ODK Central is to use the REST API as documented (with live examples in multiple programming languages) at the <a href="https://odkcentral.docs.apiary.io/">ODK Central API docs</a>.</p>
<div id="configure-ruodk" class="section level1">
<h1 class="hasAnchor">
<a href="#configure-ruodk" class="anchor"></a>Configure ruODK</h1>
<p>The OData service URL is shown in the form’s “Submissions” tab &gt; “Analyze via OData” on ODK Central. It contains base URL, project ID, and form ID and is used by <code><a href="../reference/ru_setup.html">ruODK::ru_setup()</a></code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># ODK Central's OData URL contains base URL, project ID, and form ID</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># ODK Central credentials can live in .Renviron, see vignette "setup"</span></a>
<a class="sourceLine" id="cb1-3" title="3">ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/ru_setup.html">ru_setup</a></span>(</a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="dt">svc =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"https://sandbox.central.opendatakit.org/v1/projects/14/"</span>,</a>
<a class="sourceLine" id="cb1-5" title="5">               <span class="st">"forms/build_Flora-Quadrat-0-4_1564384341.svc"</span>),</a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="dt">un =</span> <span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"ODKC_TEST_UN"</span>),</a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="dt">pw =</span> <span class="kw"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"ODKC_TEST_PW"</span>)</a>
<a class="sourceLine" id="cb1-8" title="8">)</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; &lt;ruODK settings&gt;</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt;   Default ODK Central Project ID:  14 </span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">#&gt;   Default ODK Central Form ID:  build_Flora-Quadrat-0-4_1564384341 </span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">#&gt;   Default ODK Central URL:  https://sandbox.central.opendatakit.org </span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">#&gt;   Default ODK Central Username:  Florian.Mayer@dbca.wa.gov.au </span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co">#&gt;   Default ODK Central Password: run ruODK::get_default_pw() to show </span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="co">#&gt;   Test ODK Central Project ID: 14 </span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co">#&gt;   Test ODK Central Form ID: build_Flora-Quadrat-0-4_1564384341 </span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co">#&gt;   Test ODK Central Form ID (ZIP tests): build_Spotlighting-0-6_1558333698 </span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="co">#&gt;   Test ODK Central Form ID (Attachment tests): build_Flora-Quadrat-0-1_1558330379 </span></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="co">#&gt;   Test ODK Central Form ID (Parsing tests): build_Turtle-Track-or-Nest-1-0_1569907666 </span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="co">#&gt;   Test ODK Central URL: https://sandbox.central.opendatakit.org </span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co">#&gt;   Test ODK Central Username: Florian.Mayer@dbca.wa.gov.au </span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="co">#&gt;   Test ODK Central Password: run ruODK::get_test_pw() to show</span></a>
<a class="sourceLine" id="cb1-23" title="23"></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="co"># Settings for timezone and file attachment download location</span></a>
<a class="sourceLine" id="cb1-25" title="25">tz &lt;-<span class="st"> "Australia/Perth"</span></a>
<a class="sourceLine" id="cb1-26" title="26">loc &lt;-<span class="st"> </span>fs<span class="op">::</span><span class="kw"><a href="http://fs.r-lib.org/reference/path.html">path</a></span>(<span class="st">"attachments"</span>, <span class="st">"media"</span>)</a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="co"># Canned data</span></a>
<a class="sourceLine" id="cb1-29" title="29"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"fq_svc"</span>)</a>
<a class="sourceLine" id="cb1-30" title="30"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"fq_form_schema"</span>)</a>
<a class="sourceLine" id="cb1-31" title="31"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"fq_meta"</span>)</a>
<a class="sourceLine" id="cb1-32" title="32"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"fq_raw"</span>)</a>
<a class="sourceLine" id="cb1-33" title="33"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"fq_raw_strata"</span>)</a>
<a class="sourceLine" id="cb1-34" title="34"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"fq_raw_taxa"</span>)</a>
<a class="sourceLine" id="cb1-35" title="35"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"fq_data"</span>)</a>
<a class="sourceLine" id="cb1-36" title="36"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"fq_data_strata"</span>)</a>
<a class="sourceLine" id="cb1-37" title="37"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"fq_data_taxa"</span>)</a></code></pre></div>
<p>To extract data from the OData API endpoints, we have to:</p>
<ul>
<li>discover data endpoints from the OData service document,</li>
<li>inspect the metadata schema to infer data types,</li>
<li>download submissions from the data endpoints,</li>
<li>download media attachments and adjust their file paths to the downloaded files.</li>
</ul>
<div id="odata-service-document" class="section level2">
<h2 class="hasAnchor">
<a href="#odata-service-document" class="anchor"></a>OData service document</h2>
<p>Let’s start off with the service document.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">fq_svc &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_service_get.html">odata_service_get</a></span>()</a></code></pre></div>
<p>The same data is included as example data <code>fq_svc</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">fq_svc <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">kind</th>
<th align="left">url</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Submissions</td>
<td align="left">EntitySet</td>
<td align="left">Submissions</td>
</tr>
<tr class="even">
<td align="left">Submissions.vegetation_stratum</td>
<td align="left">EntitySet</td>
<td align="left">Submissions.vegetation_stratum</td>
</tr>
<tr class="odd">
<td align="left">Submissions.taxon_encounter</td>
<td align="left">EntitySet</td>
<td align="left">Submissions.taxon_encounter</td>
</tr>
</tbody>
</table>
<p><code>ruODK</code> provides the names and urls of the service endpoints as <code>tibble</code>. We see the main data available under the url <code>Submissions</code>, and repeating groups called <code>taxon_encounter</code> and <code>vegetation_stratum</code> in the ODK form under the url <code>Submissions.taxon_encounter</code> and <code>Submissions.vegetation_stratum</code>, respectively.</p>
<p>The number and names of repeating subgroups of course depends on the ODK form.</p>
</div>
<div id="odata-metadata-document" class="section level2">
<h2 class="hasAnchor">
<a href="#odata-metadata-document" class="anchor"></a>OData metadata document</h2>
<p>Next, let’s get the metadata to review our data schema. While we can download the submission data without it, the metadata document contains information about field data types and attachment names.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">fq_meta &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_metadata_get.html">odata_metadata_get</a></span>()</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">listviewer<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/listviewer/man/jsonedit.html">jsonedit</a></span>(fq_meta)</a></code></pre></div>
<div id="htmlwidget-e00673f7db8a25571fce" style="width:672px;height:432.632880098888px;" class="jsonedit html-widget"></div>
<script type="application/json" data-for="htmlwidget-e00673f7db8a25571fce">{"x":{"data":{"Edmx":{"DataServices":{"Schema":{"ComplexType":{"Property":[],"Property.1":[],"Property.2":[],"Property.3":[],"Property.4":[],"Property.5":[]},"EnumType":{"Member":[],"Member.1":[]}},"Schema.1":{"EntityType":{"Key":{"PropertyRef":[]},"Property":[],"Property.1":[],"Property.2":[],"Property.3":[],"Property.4":[],"Property.5":[],"Property.6":[],"Property.7":[],"NavigationProperty":[],"Property.8":[],"NavigationProperty.1":[],"Property.9":[]},"EntityType.1":{"Key":{"PropertyRef":[]},"Property":[],"Property.1":[],"Property.2":[],"Property.3":[],"Property.4":[],"Property.5":[],"Property.6":[],"Property.7":[],"Property.8":[]},"EntityType.2":{"Key":{"PropertyRef":[]},"Property":[],"Property.1":[],"Property.2":[],"Property.3":[],"Property.4":[],"Property.5":[],"Property.6":[],"Property.7":[]},"ComplexType":{"Property":[]},"ComplexType.1":{"Property":[],"Property.1":[],"Property.2":[]},"ComplexType.2":{"Property":[],"Property.1":[]},"ComplexType.3":{"Property":[],"Property.1":[],"Property.2":[],"Property.3":[]},"EntityContainer":{"EntitySet":{"Annotation":[],"Annotation.1":[],"Annotation.2":{"Record":{"PropertyValue":[]}},"Annotation.3":{"Record":{"PropertyValue":{"Collection":{"String":["eq"]}}}},"Annotation.4":{"Record":{"PropertyValue":[],"PropertyValue.1":[],"PropertyValue.2":{"Collection":{"PropertyPath":["meta"],"PropertyPath.1":["encounter_start_datetime"],"PropertyPath.2":["reporter"],"PropertyPath.3":["device_id"],"PropertyPath.4":["location"],"PropertyPath.5":["habitat"],"PropertyPath.6":["vegetation_stratum"],"PropertyPath.7":["perimeter"],"PropertyPath.8":["taxon_encounter"],"PropertyPath.9":["encounter_end_datetime"]}}}},"Annotation.5":{"Record":{"PropertyValue":[]}},"Annotation.6":{"Record":{"PropertyValue":[]}}},"EntitySet.1":["\n        "],"EntitySet.2":["\n        "]}}}}},"options":{"mode":"tree","modes":["code","form","text","tree","view"]}},"evals":[],"jsHooks":[]}</script><p>As an alternative to the OData metadata document, ODK Central also offers form metadata as a much cleaner JSON document, which <code>ruODK</code> can read and parse into a clean <code>tibble</code> of field type, name, and path. <code>ruODK</code> uses this introspection to parse submission data.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">fq_form_schema &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/form_schema.html">form_schema</a></span>()</a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">fq_form_schema <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">type</th>
<th align="left">name</th>
<th align="left">path</th>
<th align="left">ruodk_name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">structure</td>
<td align="left">meta</td>
<td align="left">Submissions</td>
<td align="left">meta</td>
</tr>
<tr class="even">
<td align="left">dateTime</td>
<td align="left">encounter_start_datetime</td>
<td align="left">Submissions</td>
<td align="left">encounter_start_datetime</td>
</tr>
<tr class="odd">
<td align="left">string</td>
<td align="left">reporter</td>
<td align="left">Submissions</td>
<td align="left">reporter</td>
</tr>
<tr class="even">
<td align="left">string</td>
<td align="left">device_id</td>
<td align="left">Submissions</td>
<td align="left">device_id</td>
</tr>
<tr class="odd">
<td align="left">structure</td>
<td align="left">location</td>
<td align="left">Submissions</td>
<td align="left">location</td>
</tr>
<tr class="even">
<td align="left">structure</td>
<td align="left">habitat</td>
<td align="left">Submissions</td>
<td align="left">habitat</td>
</tr>
<tr class="odd">
<td align="left">repeat</td>
<td align="left">vegetation_stratum</td>
<td align="left">Submissions</td>
<td align="left">vegetation_stratum</td>
</tr>
<tr class="even">
<td align="left">structure</td>
<td align="left">perimeter</td>
<td align="left">Submissions</td>
<td align="left">perimeter</td>
</tr>
<tr class="odd">
<td align="left">repeat</td>
<td align="left">taxon_encounter</td>
<td align="left">Submissions</td>
<td align="left">taxon_encounter</td>
</tr>
<tr class="even">
<td align="left">dateTime</td>
<td align="left">encounter_end_datetime</td>
<td align="left">Submissions</td>
<td align="left">encounter_end_datetime</td>
</tr>
<tr class="odd">
<td align="left">string</td>
<td align="left">instanceID</td>
<td align="left">Submissions.meta</td>
<td align="left">meta_instanceID</td>
</tr>
<tr class="even">
<td align="left">string</td>
<td align="left">area_name</td>
<td align="left">Submissions.location</td>
<td align="left">location_area_name</td>
</tr>
<tr class="odd">
<td align="left">binary</td>
<td align="left">quadrat_photo</td>
<td align="left">Submissions.location</td>
<td align="left">location_quadrat_photo</td>
</tr>
<tr class="even">
<td align="left">geopoint</td>
<td align="left">corner1</td>
<td align="left">Submissions.location</td>
<td align="left">location_corner1</td>
</tr>
<tr class="odd">
<td align="left">select1</td>
<td align="left">morphological_type</td>
<td align="left">Submissions.habitat</td>
<td align="left">habitat_morphological_type</td>
</tr>
<tr class="even">
<td align="left">binary</td>
<td align="left">morphological_type_photo</td>
<td align="left">Submissions.habitat</td>
<td align="left">habitat_morphological_type_photo</td>
</tr>
<tr class="odd">
<td align="left">select1</td>
<td align="left">nvis_level3_broad_floristic_group</td>
<td align="left">Submissions.vegetation_stratum</td>
<td align="left">vegetation_stratum_nvis_level3_broad_floristic_group</td>
</tr>
<tr class="even">
<td align="left">decimal</td>
<td align="left">max_height_m</td>
<td align="left">Submissions.vegetation_stratum</td>
<td align="left">vegetation_stratum_max_height_m</td>
</tr>
<tr class="odd">
<td align="left">select1</td>
<td align="left">foliage_cover</td>
<td align="left">Submissions.vegetation_stratum</td>
<td align="left">vegetation_stratum_foliage_cover</td>
</tr>
<tr class="even">
<td align="left">string</td>
<td align="left">dominant_species_1</td>
<td align="left">Submissions.vegetation_stratum</td>
<td align="left">vegetation_stratum_dominant_species_1</td>
</tr>
<tr class="odd">
<td align="left">string</td>
<td align="left">dominant_species_2</td>
<td align="left">Submissions.vegetation_stratum</td>
<td align="left">vegetation_stratum_dominant_species_2</td>
</tr>
<tr class="even">
<td align="left">string</td>
<td align="left">dominant_species_3</td>
<td align="left">Submissions.vegetation_stratum</td>
<td align="left">vegetation_stratum_dominant_species_3</td>
</tr>
<tr class="odd">
<td align="left">string</td>
<td align="left">dominant_species_4</td>
<td align="left">Submissions.vegetation_stratum</td>
<td align="left">vegetation_stratum_dominant_species_4</td>
</tr>
<tr class="even">
<td align="left">geopoint</td>
<td align="left">corner2</td>
<td align="left">Submissions.perimeter</td>
<td align="left">perimeter_corner2</td>
</tr>
<tr class="odd">
<td align="left">geopoint</td>
<td align="left">corner3</td>
<td align="left">Submissions.perimeter</td>
<td align="left">perimeter_corner3</td>
</tr>
<tr class="even">
<td align="left">geopoint</td>
<td align="left">corner4</td>
<td align="left">Submissions.perimeter</td>
<td align="left">perimeter_corner4</td>
</tr>
<tr class="odd">
<td align="left">binary</td>
<td align="left">mudmap_photo</td>
<td align="left">Submissions.perimeter</td>
<td align="left">perimeter_mudmap_photo</td>
</tr>
<tr class="even">
<td align="left">string</td>
<td align="left">field_name</td>
<td align="left">Submissions.taxon_encounter</td>
<td align="left">taxon_encounter_field_name</td>
</tr>
<tr class="odd">
<td align="left">binary</td>
<td align="left">photo_in_situ</td>
<td align="left">Submissions.taxon_encounter</td>
<td align="left">taxon_encounter_photo_in_situ</td>
</tr>
<tr class="even">
<td align="left">geopoint</td>
<td align="left">taxon_encounter_location</td>
<td align="left">Submissions.taxon_encounter</td>
<td align="left">taxon_encounter_taxon_encounter_location</td>
</tr>
<tr class="odd">
<td align="left">select1</td>
<td align="left">life_form</td>
<td align="left">Submissions.taxon_encounter</td>
<td align="left">taxon_encounter_life_form</td>
</tr>
<tr class="even">
<td align="left">barcode</td>
<td align="left">voucher_specimen_barcode</td>
<td align="left">Submissions.taxon_encounter</td>
<td align="left">taxon_encounter_voucher_specimen_barcode</td>
</tr>
<tr class="odd">
<td align="left">string</td>
<td align="left">voucher_specimen_label</td>
<td align="left">Submissions.taxon_encounter</td>
<td align="left">taxon_encounter_voucher_specimen_label</td>
</tr>
</tbody>
</table>
</div>
<div id="odata-submission-data-documents" class="section level2">
<h2 class="hasAnchor">
<a href="#odata-submission-data-documents" class="anchor"></a>OData submission data documents</h2>
<p>Now let’s download the form submissions and, separately, repeating form groups. <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code> defaults to download the submission data, parse it into a tidy tibble, parses dates and datetimes, and finally downloads and links file attachments. This vignette is built with canned data, so the verbose messages are not shown. If we use <code>wkt=TRUE</code>, geopoint fields are automatically split into their individual coordinates and prefixed with their respective original field name. If we use <code>wkt=FALSE</code> (the default), geopoints will be split but receive anonymous names like <code>x10</code>, <code>x11</code>, <code>x12</code> which then need to be renamed.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">fq_data &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_submission_get.html">odata_submission_get</a></span>(</a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="dt">table =</span> fq_svc<span class="op">$</span>name[<span class="dv">1</span>], </a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="dt">verbose =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="dt">tz =</span> tz, </a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="dt">local_dir =</span> loc,</a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="dt">wkt=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-7" title="7"></a>
<a class="sourceLine" id="cb8-8" title="8">fq_data_strata &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_submission_get.html">odata_submission_get</a></span>(</a>
<a class="sourceLine" id="cb8-9" title="9">  <span class="dt">table =</span> fq_svc<span class="op">$</span>name[<span class="dv">2</span>], </a>
<a class="sourceLine" id="cb8-10" title="10">  <span class="dt">verbose =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb8-11" title="11">  <span class="dt">tz =</span> tz, </a>
<a class="sourceLine" id="cb8-12" title="12">  <span class="dt">local_dir =</span> loc</a>
<a class="sourceLine" id="cb8-13" title="13">)</a>
<a class="sourceLine" id="cb8-14" title="14"></a>
<a class="sourceLine" id="cb8-15" title="15">fq_data_taxa &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_submission_get.html">odata_submission_get</a></span>(</a>
<a class="sourceLine" id="cb8-16" title="16">  <span class="dt">table =</span> fq_svc<span class="op">$</span>name[<span class="dv">3</span>], </a>
<a class="sourceLine" id="cb8-17" title="17">  <span class="dt">verbose =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb8-18" title="18">  <span class="dt">tz =</span> tz, </a>
<a class="sourceLine" id="cb8-19" title="19">  <span class="dt">local_dir =</span> loc,</a>
<a class="sourceLine" id="cb8-20" title="20">  <span class="dt">wkt=</span><span class="ot">TRUE</span>)</a></code></pre></div>
</div>
</div>
<div id="detour-data-rectangling" class="section level1">
<h1 class="hasAnchor">
<a href="#detour-data-rectangling" class="anchor"></a>Detour: Data rectangling</h1>
<p>The function <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code> received the original XML response as a nested list of lists. To analyse and visualise the data, this nested list of lists must be transformed into a rectangular shape. The function <code><a href="../reference/odata_submission_parse.html">ruODK::odata_submission_parse()</a></code> is used internally to recursively unnest list columns using <code><a href="https://tidyr.tidyverse.org/reference/hoist.html">tidyr::unnest_wider()</a></code>. Unnamed columns, notably the anonymous lat/lon/alt coordinates, are named automatically to become unique (a feature of <code>tidyr::unnest_*()</code>), and then sanitised using the helper <code><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">janitor::clean_names()</a></code>.</p>
<p>Had we used <code>wkt=FALSE</code> in this example, we would have needed to<br>
clean up the output further by renaming some columns, notably the main coordinates from <code>x13</code> and <code>x14</code> to <code>longitude</code> and <code>latitude</code>. The position and name of anonymous coordinates depends on the respective dataset.</p>
<p>The vectorised function <code><a href="../reference/attachment_get.html">ruODK::attachment_get()</a></code> is then used internally to download and link attachments like photos and other media to a local, relative path. This will take some time during the first run. Once the files exist locally, the download will be skipped.</p>
<p>When used through <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code>, <code>ruODK</code> will introspect the form schema to detect and then parse media attachment fields automatically. When used manually, field names of media attachment fields can be (partially or fully) specified, see <code>??ruODK::attachment_get()</code>.</p>
<p>The date formats are parsed from ISO8601 timestamps into POSIXct objects with <code>ruODK::parse_datetime()</code>. We use our local timezone (GMT+08) in this example. When used through <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code>, <code>ruODK</code> will introspect the form schema to detect and then parse date and datetime fields automatically. When used manually, field names of date and datetime fields can be (partially or fully) specified, see <code>??ruODK::parse_datetime()</code>.</p>
<p>The repeated subgroup <code>taxon_encounter</code> is left joined to the main submission data to receive a (repeated) copy of the main submission data (such as location, time and habitat description). We will do the same to the other repeated subgroup <code>vegetation_stratum</code>.</p>
<p>For clarity, we enable verbose messages from <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code> and preserve the message output in the code chunk options with <code>message=TRUE</code>. In real-world use cases, messages can be disabled through the chunk option <code>message=FALSE</code>.</p>
<p>We use a custom local path for attachments (<code>loc</code>). This results in a smaller installed package size for <code>ruODK</code>, as it shares the attachment files with the other vignettes. The default is a local folder <code>media</code>.</p>
<p>The raw and unparsed example data is provided as data objects <code>fq_raw</code> (main submissions of form Flora Quadrat 0.4), <code>fq_raw_taxa</code> (repeated group “Taxon Encounter” within a Flora Quadrat), and <code>fq_raw_strata</code> (repeated group “Vegetation Stratum” within a Flora Quadrat).</p>
<p>The parsed versions are included as data objects <code>fq_data</code>, <code>fq_data_strata</code>, and <code>fq_data_taxa</code>. To enable users without ODK Central credentials to build this vignette (e.g. on package installation with <code>build_vignettes=TRUE</code>), we show the real functions (such as <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code>), but do not evaluate them. Instead, we use “canned data”. The <code>ruODK</code> test suite ensures that canned data are equivalent to live data.</p>
<p>The result of this code chunk should be exactly the same as the compact version with <code><a href="../reference/odata_submission_get.html">odata_submission_get(parse=TRUE)</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co"># Candidates for ruODK::parse_datetime()</span></a>
<a class="sourceLine" id="cb9-2" title="2">fq_form_schema <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(type <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"dateTime"</span>, <span class="st">"date"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">type</th>
<th align="left">name</th>
<th align="left">path</th>
<th align="left">ruodk_name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">dateTime</td>
<td align="left">encounter_start_datetime</td>
<td align="left">Submissions</td>
<td align="left">encounter_start_datetime</td>
</tr>
<tr class="even">
<td align="left">dateTime</td>
<td align="left">encounter_end_datetime</td>
<td align="left">Submissions</td>
<td align="left">encounter_end_datetime</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co"># Candidates for ruODK::attachment_get()</span></a>
<a class="sourceLine" id="cb10-3" title="3">fq_form_schema <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(type <span class="op">==</span><span class="st"> "binary"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">  </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">type</th>
<th align="left">name</th>
<th align="left">path</th>
<th align="left">ruodk_name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">binary</td>
<td align="left">quadrat_photo</td>
<td align="left">Submissions.location</td>
<td align="left">location_quadrat_photo</td>
</tr>
<tr class="even">
<td align="left">binary</td>
<td align="left">morphological_type_photo</td>
<td align="left">Submissions.habitat</td>
<td align="left">habitat_morphological_type_photo</td>
</tr>
<tr class="odd">
<td align="left">binary</td>
<td align="left">mudmap_photo</td>
<td align="left">Submissions.perimeter</td>
<td align="left">perimeter_mudmap_photo</td>
</tr>
<tr class="even">
<td align="left">binary</td>
<td align="left">photo_in_situ</td>
<td align="left">Submissions.taxon_encounter</td>
<td align="left">taxon_encounter_photo_in_situ</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="co"># Candidates for ruODK::split_geopoint</span></a>
<a class="sourceLine" id="cb11-3" title="3">fq_form_schema <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(type <span class="op">==</span><span class="st"> "geopoint"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">  </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(.)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">type</th>
<th align="left">name</th>
<th align="left">path</th>
<th align="left">ruodk_name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">geopoint</td>
<td align="left">corner1</td>
<td align="left">Submissions.location</td>
<td align="left">location_corner1</td>
</tr>
<tr class="even">
<td align="left">geopoint</td>
<td align="left">corner2</td>
<td align="left">Submissions.perimeter</td>
<td align="left">perimeter_corner2</td>
</tr>
<tr class="odd">
<td align="left">geopoint</td>
<td align="left">corner3</td>
<td align="left">Submissions.perimeter</td>
<td align="left">perimeter_corner3</td>
</tr>
<tr class="even">
<td align="left">geopoint</td>
<td align="left">corner4</td>
<td align="left">Submissions.perimeter</td>
<td align="left">perimeter_corner4</td>
</tr>
<tr class="odd">
<td align="left">geopoint</td>
<td align="left">taxon_encounter_location</td>
<td align="left">Submissions.taxon_encounter</td>
<td align="left">taxon_encounter_taxon_encounter_location</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># The raw submission data</span></a>
<a class="sourceLine" id="cb12-2" title="2">fq_raw &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_submission_get.html">odata_submission_get</a></span>(<span class="dt">table =</span> fq_svc<span class="op">$</span>name[<span class="dv">1</span>], <span class="dt">parse =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb12-3" title="3">fq_strata &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_submission_get.html">odata_submission_get</a></span>(<span class="dt">table =</span> fq_svc<span class="op">$</span>name[<span class="dv">2</span>], <span class="dt">parse =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb12-4" title="4">fq_taxa &lt;-<span class="st"> </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_submission_get.html">odata_submission_get</a></span>(<span class="dt">table =</span> fq_svc<span class="op">$</span>name[<span class="dv">3</span>], <span class="dt">parse =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb12-5" title="5"></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co"># Parse main data</span></a>
<a class="sourceLine" id="cb12-7" title="7">fq_data &lt;-<span class="st"> </span>fq_raw <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="st">  </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_submission_parse.html">odata_submission_parse</a></span>(<span class="dt">verbose =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="st">  </span>ruODK<span class="op">::</span><span class="kw">parse_datetime</span>(<span class="dt">tz =</span> tz, <span class="dt">col_contains =</span> <span class="st">"time"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="st">  </span>ruODK<span class="op">::</span><span class="kw">parse_datetime</span>(<span class="dt">tz =</span> tz, <span class="dt">col_contains =</span> <span class="st">"date"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(</a>
<a class="sourceLine" id="cb12-12" title="12">    <span class="dt">longitude =</span> x13,</a>
<a class="sourceLine" id="cb12-13" title="13">    <span class="dt">latitude =</span> x14,</a>
<a class="sourceLine" id="cb12-14" title="14">    <span class="dt">altitude =</span> x15</a>
<a class="sourceLine" id="cb12-15" title="15">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-16" title="16"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(</a>
<a class="sourceLine" id="cb12-17" title="17">    <span class="dt">quadrat_photo =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/attachment_get.html">attachment_get</a></span>(</a>
<a class="sourceLine" id="cb12-18" title="18">      id, </a>
<a class="sourceLine" id="cb12-19" title="19">      location_quadrat_photo, </a>
<a class="sourceLine" id="cb12-20" title="20">      <span class="dt">local_dir =</span> loc</a>
<a class="sourceLine" id="cb12-21" title="21">    ),</a>
<a class="sourceLine" id="cb12-22" title="22">    <span class="dt">morphological_type_photo =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/attachment_get.html">attachment_get</a></span>(</a>
<a class="sourceLine" id="cb12-23" title="23">      id, </a>
<a class="sourceLine" id="cb12-24" title="24">      morphological_type_photo, </a>
<a class="sourceLine" id="cb12-25" title="25">      <span class="dt">local_dir =</span> loc</a>
<a class="sourceLine" id="cb12-26" title="26">    ),</a>
<a class="sourceLine" id="cb12-27" title="27">    <span class="dt">mudmap_photo =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/attachment_get.html">attachment_get</a></span>(</a>
<a class="sourceLine" id="cb12-28" title="28">      id, </a>
<a class="sourceLine" id="cb12-29" title="29">      mudmap_photo, </a>
<a class="sourceLine" id="cb12-30" title="30">      <span class="dt">local_dir =</span> loc</a>
<a class="sourceLine" id="cb12-31" title="31">    )</a>
<a class="sourceLine" id="cb12-32" title="32">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-33" title="33"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>()</a>
<a class="sourceLine" id="cb12-34" title="34"></a>
<a class="sourceLine" id="cb12-35" title="35"><span class="co"># Parse nested group "taxa"</span></a>
<a class="sourceLine" id="cb12-36" title="36">fq_data_taxa &lt;-<span class="st"> </span>fq_taxa <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-37" title="37"><span class="st">  </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_submission_parse.html">odata_submission_parse</a></span>(<span class="dt">verbose =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-38" title="38"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(</a>
<a class="sourceLine" id="cb12-39" title="39">    <span class="dt">lon =</span> x6,</a>
<a class="sourceLine" id="cb12-40" title="40">    <span class="dt">lat =</span> x7,</a>
<a class="sourceLine" id="cb12-41" title="41">    <span class="dt">alt =</span> x8</a>
<a class="sourceLine" id="cb12-42" title="42">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-43" title="43"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(</a>
<a class="sourceLine" id="cb12-44" title="44">    <span class="dt">photo_in_situ =</span> ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/attachment_get.html">attachment_get</a></span>(</a>
<a class="sourceLine" id="cb12-45" title="45">      submissions_id, </a>
<a class="sourceLine" id="cb12-46" title="46">      photo_in_situ, </a>
<a class="sourceLine" id="cb12-47" title="47">      <span class="dt">local_dir =</span> loc</a>
<a class="sourceLine" id="cb12-48" title="48">    )</a>
<a class="sourceLine" id="cb12-49" title="49">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-50" title="50"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(fq_data, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"submissions_id"</span> =<span class="st"> "id"</span>))</a>
<a class="sourceLine" id="cb12-51" title="51"></a>
<a class="sourceLine" id="cb12-52" title="52"><span class="co"># Parse nested group "strata"</span></a>
<a class="sourceLine" id="cb12-53" title="53">fq_data_strata &lt;-<span class="st"> </span>fq_strata <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-54" title="54"><span class="st">  </span>ruODK<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ruODK/man/odata_submission_parse.html">odata_submission_parse</a></span>(<span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>Note: A manually resized version of the original photos in this example live in the package source under <a href="https://github.com/dbca-wa/ruODK/tree/master/docs/articles/attachments"><code>docs/articles/attachments</code></a>. To minimise package size, they were resized with imagemagick:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb13-1" title="1"><span class="fu">find</span> vignettes/attachments/media -type f -exec mogrify -resize 200x150 {} <span class="dt">\\</span>;</a></code></pre></div>
<div id="diy-rectangling" class="section level2">
<h2 class="hasAnchor">
<a href="#diy-rectangling" class="anchor"></a>DIY rectangling</h2>
<p>For those wishing to go one step further, this section demonstrates the inner workings of <code>ruODK</code>, the recursive use of <code><a href="https://tidyr.tidyverse.org/reference/hoist.html">tidyr::unnest_wider()</a></code>.</p>
<p>The unnesting could also be done manually by building up a pipeline, which stepwise unnests each list column. This requires knowledge of the data structure, which can either be looked up from the metadata, or by inspecting the raw data, <code>fq_raw</code>.</p>
<p>The following command has been built by stepwise adding <code><a href="https://tidyr.tidyverse.org/reference/hoist.html">tidyr::unnest_wider()</a></code> expressions to the pipe until all list columns were eliminated.</p>
<p>The trailing <code><a href="https://rdrr.io/r/base/invisible.html">invisible()</a></code> allows us to toggle parts of the pipe by catching the dangling <code><a href="../reference/pipe.html">%&gt;%</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">fq_data_diy &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">value =</span> fq_raw<span class="op">$</span>value) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/hoist.html">unnest_wider</a></span>(value) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="st">  </span><span class="co"># 1. find list columns:</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/hoist.html">unnest_wider</a></span>(<span class="st">`</span><span class="dt">__system</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/hoist.html">unnest_wider</a></span>(meta) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="st">  </span><span class="co"># add more lines here to unnest other form groups</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="st">  </span><span class="co">#</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="st">  </span><span class="co"># 2. rename column names</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(</a>
<a class="sourceLine" id="cb14-10" title="10">    <span class="dt">uuid =</span> <span class="st">`</span><span class="dt">__id</span><span class="st">`</span></a>
<a class="sourceLine" id="cb14-11" title="11">    <span class="co"># add more columns, e.g.</span></a>
<a class="sourceLine" id="cb14-12" title="12">    <span class="co"># longitude=`...1`, latitude=`...2`, altitude=`...3`</span></a>
<a class="sourceLine" id="cb14-13" title="13">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="st">  </span><span class="co"># 3. handle media attachments</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="st">  </span><span class="co"># dplyr::mutate(photo_1 = attachment_get(data_url, uuid, photo_1)) %&gt;%</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>()</a></code></pre></div>
</div>
<div id="spatial-formats---how-granular-would-you-like-your-coordinates" class="section level2">
<h2 class="hasAnchor">
<a href="#spatial-formats---how-granular-would-you-like-your-coordinates" class="anchor"></a>Spatial formats - how granular would you like your coordinates?</h2>
<p>If we run <code><a href="../reference/odata_submission_get.html">odata_submission_get()</a></code> with <code>wkt=FALSE</code> (the default), we will receive GeoJSON. Point GeoJSON parses with <code>parse_submissions</code> into separate columns for lat, lon, alt (soon accuracy). This is useful for e.g. leaflet maps which want lat and lon separately, see example map below.</p>
<p>If we run <code><a href="../reference/odata_submission_get.html">odata_submission_get()</a></code> with <code>wkt=TRUE</code> (the default), we will not surprisingly receive WKT. This is useful for spatial objects with non-deterministic length like lines and polygons. If encountering WKT, <code>parse_submissions</code> simply retains the WKT string containing the respective entire geometry. This can further be turned into spatially enabled objects.</p>
<p>Note that ODK Central currently only honours the <code>wkt</code> parameter for Point locations. Any other geometry will be returned as non-standard “ODK WKT”.</p>
<p>In future, we will add some examples for this use case here.</p>
</div>
</div>
<div id="visualise-data" class="section level1">
<h1 class="hasAnchor">
<a href="#visualise-data" class="anchor"></a>Visualise data</h1>
<p>This section provides some examples of standard data visualisations.</p>
<div id="datatable" class="section level2">
<h2 class="hasAnchor">
<a href="#datatable" class="anchor"></a>Datatable</h2>
<p>Package <code>DT</code> provides an interactive (and searchable) datatable.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">DT<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(fq_data)</a></code></pre></div>
<div id="htmlwidget-55aeff6de47247efac27" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-55aeff6de47247efac27">{"x":{"filter":"none","data":[["1","2"],["uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f"],["2019-09-18T08:12:21Z","2019-09-18T06:08:43Z"],["Florian Mayer","Florian Mayer"],["f73d2e1221ceaa06","f73d2e1221ceaa06"],["2019-09-18T08:40:46Z","2019-09-18T06:18:53Z"],["2019-09-18T08:51:07.481Z","2019-09-18T06:20:25.780Z"],["241","241"],["flora","flora"],[4,8],[4,8],["uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f"],["Kensington Carpark 01","Kensington Planter Box 1"],["media/1568794395624.jpg","media/1568786958640.jpg"],[115.88456271,115.88433971],[-31.99605811,-31.99614843],[6.40451049804688,-17.3724060058594],["mid-slope","flat"],["media/1568794560256.jpg","media/1568787004467.jpg"],["Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/vegetation_stratum","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/vegetation_stratum"],[115.88435548,115.88438584],[-31.99622531,-31.99620073],[-26.3056945800781,-8.6624755859375],[115.88436077,115.88440369],[-31.99614759,-31.99622144],[-17.8975524902344,-6.26614379882812],[115.88432984,115.88438399],[-31.99610179,-31.99620546],[-27.7593383789062,-6.59774780273438],["NA","media/1568787172983.jpg"],["Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/taxon_encounter","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/taxon_encounter"],["https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>encounter_start_datetime<\/th>\n      <th>reporter<\/th>\n      <th>device_id<\/th>\n      <th>encounter_end_datetime<\/th>\n      <th>system_submission_date<\/th>\n      <th>system_submitter_id<\/th>\n      <th>system_submitter_name<\/th>\n      <th>system_attachments_present<\/th>\n      <th>system_attachments_expected<\/th>\n      <th>meta_instance_id<\/th>\n      <th>location_area_name<\/th>\n      <th>location_quadrat_photo<\/th>\n      <th>location_corner1_longitude<\/th>\n      <th>location_corner1_latitude<\/th>\n      <th>location_corner1_altitude<\/th>\n      <th>habitat_morphological_type<\/th>\n      <th>habitat_morphological_type_photo<\/th>\n      <th>vegetation_stratum_odata_navigation_link<\/th>\n      <th>perimeter_corner2_longitude<\/th>\n      <th>perimeter_corner2_latitude<\/th>\n      <th>perimeter_corner2_altitude<\/th>\n      <th>perimeter_corner3_longitude<\/th>\n      <th>perimeter_corner3_latitude<\/th>\n      <th>perimeter_corner3_altitude<\/th>\n      <th>perimeter_corner4_longitude<\/th>\n      <th>perimeter_corner4_latitude<\/th>\n      <th>perimeter_corner4_altitude<\/th>\n      <th>perimeter_mudmap_photo<\/th>\n      <th>taxon_encounter_odata_navigation_link<\/th>\n      <th>odata_context<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[9,10,14,15,16,20,21,22,23,24,25,26,27,28]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">DT<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(fq_data_taxa)</a></code></pre></div>
<div id="htmlwidget-9e99a126102596b79376" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9e99a126102596b79376">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7"],["55cf957363a531ce8d704a8e83f0f808184dcd85","952be962061a94c9def4d197893b2394d6cd2964","d085d5b29883bdefbaa01bfd8b4d97b6ab5cb334","61bf5758f1e325b2788ede17f2184770eb63784d","4f09236d26a4a342d1d14a4cf66f9b1f9fe2ddcc","bd9de7d41717b28c26685c327bd05dea4bcb333c","9c10eabba4d4cfbd301f9909af3fc25119f089a7"],["uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f"],["Conostylis yellow","Blue bush","Pileanthus sp. Peachy flowers","Small pink flowers","Small red flowers","Funky grass violet flowers","Sharp edged red flowers"],["1568795382633.jpg","1568795579890.jpg","1568787220913.jpg","1568787333689.jpg","1568787380833.jpg","1568787456664.jpg","1568787504877.jpg"],["POINT (115.88433281 -31.99605058 -25.6241455078125)","POINT (115.88439814 -31.99601125 -14.467254638671875)","POINT (115.88424501 -31.99626091 -64.94879150390625)","POINT (115.88428544 -31.99623047 -44.85186767578125)","POINT (115.88450938 -31.99616689 -0.85919189453125)","POINT (115.88441209 -31.99617326 -9.488067626953125)","POINT (115.88442761 -31.9962021 -12.5390625)"],["g2.0_tussock_grass",null,"w3.0_shrub","w3.1_heath_shrub",null,"g4.0_sedge","w3.1_heath_shrub"],["09929760",null,"08173089",null,null,null,null],["JD001","JD002",null,"FM001","FM002","FM003","FM004"],["https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.taxon_encounter","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.taxon_encounter","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.taxon_encounter","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.taxon_encounter","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.taxon_encounter","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.taxon_encounter","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.taxon_encounter"],["2019-09-18T08:12:21Z","2019-09-18T08:12:21Z","2019-09-18T06:08:43Z","2019-09-18T06:08:43Z","2019-09-18T06:08:43Z","2019-09-18T06:08:43Z","2019-09-18T06:08:43Z"],["Florian Mayer","Florian Mayer","Florian Mayer","Florian Mayer","Florian Mayer","Florian Mayer","Florian Mayer"],["f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06"],["2019-09-18T08:40:46Z","2019-09-18T08:40:46Z","2019-09-18T06:18:53Z","2019-09-18T06:18:53Z","2019-09-18T06:18:53Z","2019-09-18T06:18:53Z","2019-09-18T06:18:53Z"],["2019-09-18T08:51:07.481Z","2019-09-18T08:51:07.481Z","2019-09-18T06:20:25.780Z","2019-09-18T06:20:25.780Z","2019-09-18T06:20:25.780Z","2019-09-18T06:20:25.780Z","2019-09-18T06:20:25.780Z"],["241","241","241","241","241","241","241"],["flora","flora","flora","flora","flora","flora","flora"],[4,4,8,8,8,8,8],[4,4,8,8,8,8,8],["uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f"],["Kensington Carpark 01","Kensington Carpark 01","Kensington Planter Box 1","Kensington Planter Box 1","Kensington Planter Box 1","Kensington Planter Box 1","Kensington Planter Box 1"],["media/1568794395624.jpg","media/1568794395624.jpg","media/1568786958640.jpg","media/1568786958640.jpg","media/1568786958640.jpg","media/1568786958640.jpg","media/1568786958640.jpg"],[115.88456271,115.88456271,115.88433971,115.88433971,115.88433971,115.88433971,115.88433971],[-31.99605811,-31.99605811,-31.99614843,-31.99614843,-31.99614843,-31.99614843,-31.99614843],[6.40451049804688,6.40451049804688,-17.3724060058594,-17.3724060058594,-17.3724060058594,-17.3724060058594,-17.3724060058594],["mid-slope","mid-slope","flat","flat","flat","flat","flat"],["media/1568794560256.jpg","media/1568794560256.jpg","media/1568787004467.jpg","media/1568787004467.jpg","media/1568787004467.jpg","media/1568787004467.jpg","media/1568787004467.jpg"],["Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/vegetation_stratum","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/vegetation_stratum","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/vegetation_stratum","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/vegetation_stratum","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/vegetation_stratum","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/vegetation_stratum","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/vegetation_stratum"],[115.88435548,115.88435548,115.88438584,115.88438584,115.88438584,115.88438584,115.88438584],[-31.99622531,-31.99622531,-31.99620073,-31.99620073,-31.99620073,-31.99620073,-31.99620073],[-26.3056945800781,-26.3056945800781,-8.6624755859375,-8.6624755859375,-8.6624755859375,-8.6624755859375,-8.6624755859375],[115.88436077,115.88436077,115.88440369,115.88440369,115.88440369,115.88440369,115.88440369],[-31.99614759,-31.99614759,-31.99622144,-31.99622144,-31.99622144,-31.99622144,-31.99622144],[-17.8975524902344,-17.8975524902344,-6.26614379882812,-6.26614379882812,-6.26614379882812,-6.26614379882812,-6.26614379882812],[115.88432984,115.88432984,115.88438399,115.88438399,115.88438399,115.88438399,115.88438399],[-31.99610179,-31.99610179,-31.99620546,-31.99620546,-31.99620546,-31.99620546,-31.99620546],[-27.7593383789062,-27.7593383789062,-6.59774780273438,-6.59774780273438,-6.59774780273438,-6.59774780273438,-6.59774780273438],["NA","NA","media/1568787172983.jpg","media/1568787172983.jpg","media/1568787172983.jpg","media/1568787172983.jpg","media/1568787172983.jpg"],["Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/taxon_encounter","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/taxon_encounter","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/taxon_encounter","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/taxon_encounter","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/taxon_encounter","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/taxon_encounter","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/taxon_encounter"],["https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>submissions_id<\/th>\n      <th>field_name<\/th>\n      <th>photo_in_situ<\/th>\n      <th>taxon_encounter_location<\/th>\n      <th>life_form<\/th>\n      <th>voucher_specimen_barcode<\/th>\n      <th>voucher_specimen_label<\/th>\n      <th>odata_context.x<\/th>\n      <th>encounter_start_datetime<\/th>\n      <th>reporter<\/th>\n      <th>device_id<\/th>\n      <th>encounter_end_datetime<\/th>\n      <th>system_submission_date<\/th>\n      <th>system_submitter_id<\/th>\n      <th>system_submitter_name<\/th>\n      <th>system_attachments_present<\/th>\n      <th>system_attachments_expected<\/th>\n      <th>meta_instance_id<\/th>\n      <th>location_area_name<\/th>\n      <th>location_quadrat_photo<\/th>\n      <th>location_corner1_longitude<\/th>\n      <th>location_corner1_latitude<\/th>\n      <th>location_corner1_altitude<\/th>\n      <th>habitat_morphological_type<\/th>\n      <th>habitat_morphological_type_photo<\/th>\n      <th>vegetation_stratum_odata_navigation_link<\/th>\n      <th>perimeter_corner2_longitude<\/th>\n      <th>perimeter_corner2_latitude<\/th>\n      <th>perimeter_corner2_altitude<\/th>\n      <th>perimeter_corner3_longitude<\/th>\n      <th>perimeter_corner3_latitude<\/th>\n      <th>perimeter_corner3_altitude<\/th>\n      <th>perimeter_corner4_longitude<\/th>\n      <th>perimeter_corner4_latitude<\/th>\n      <th>perimeter_corner4_altitude<\/th>\n      <th>perimeter_mudmap_photo<\/th>\n      <th>taxon_encounter_odata_navigation_link<\/th>\n      <th>odata_context.y<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[17,18,22,23,24,28,29,30,31,32,33,34,35,36]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">DT<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(fq_data_strata)</a></code></pre></div>
<div id="htmlwidget-bdcebad9eb3d91553d71" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-bdcebad9eb3d91553d71">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7"],["a04db620f0dd24b68ddc6b43d0eb894fcb8eac10","69a49cb010ea8e06c2e3ca62d8236aca7257833a","4be26f457ea5b4b1caa75827cc936842b119f099","8b5e158fedab219d3bce164332b8a12e3f005a18","44df54c0cb3440976a932a60aa64c26931cf3d4b","caabe2372ae12bcb6d470fe9ca57610dfc574dcb","5fe2b2b6fb375c8872e9deb57e14a19639469f8f"],["uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f"],["w1.0_trees_with_dominant_genus","w3.0_shrub","g4.0_sedge","w3.0_shrub","m1.0_bryophyte","w3.0_shrub","w3.1_heath_shrub"],[3,2,null,0.5,0.05,3,1],["10-5","30-10","5-0","30-10","5-0","5-0","100-70"],["Euc big fruit","Blue bush","Tall spiky","Erem green frost","Moss town","Plant name 1","Plant name 4"],[null,"Xmas shrub",null,"Banks is candles ",null,"Plant name 2","Plant name 5"],[null,"Pom poms ",null,"Conostylis yellow",null,null,null],[null,"Salt bush",null,null,null,null,null],["https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.vegetation_stratum","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.vegetation_stratum","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.vegetation_stratum","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.vegetation_stratum","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.vegetation_stratum","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.vegetation_stratum","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions.vegetation_stratum"],["2019-09-18T08:12:21Z","2019-09-18T08:12:21Z","2019-09-18T08:12:21Z","2019-09-18T08:12:21Z","2019-09-18T08:12:21Z","2019-09-18T06:08:43Z","2019-09-18T06:08:43Z"],["Florian Mayer","Florian Mayer","Florian Mayer","Florian Mayer","Florian Mayer","Florian Mayer","Florian Mayer"],["f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06","f73d2e1221ceaa06"],["2019-09-18T08:40:46Z","2019-09-18T08:40:46Z","2019-09-18T08:40:46Z","2019-09-18T08:40:46Z","2019-09-18T08:40:46Z","2019-09-18T06:18:53Z","2019-09-18T06:18:53Z"],["2019-09-18T08:51:07.481Z","2019-09-18T08:51:07.481Z","2019-09-18T08:51:07.481Z","2019-09-18T08:51:07.481Z","2019-09-18T08:51:07.481Z","2019-09-18T06:20:25.780Z","2019-09-18T06:20:25.780Z"],["241","241","241","241","241","241","241"],["flora","flora","flora","flora","flora","flora","flora"],[4,4,4,4,4,8,8],[4,4,4,4,4,8,8],["uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f","uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f"],["Kensington Carpark 01","Kensington Carpark 01","Kensington Carpark 01","Kensington Carpark 01","Kensington Carpark 01","Kensington Planter Box 1","Kensington Planter Box 1"],["media/1568794395624.jpg","media/1568794395624.jpg","media/1568794395624.jpg","media/1568794395624.jpg","media/1568794395624.jpg","media/1568786958640.jpg","media/1568786958640.jpg"],[115.88456271,115.88456271,115.88456271,115.88456271,115.88456271,115.88433971,115.88433971],[-31.99605811,-31.99605811,-31.99605811,-31.99605811,-31.99605811,-31.99614843,-31.99614843],[6.40451049804688,6.40451049804688,6.40451049804688,6.40451049804688,6.40451049804688,-17.3724060058594,-17.3724060058594],["mid-slope","mid-slope","mid-slope","mid-slope","mid-slope","flat","flat"],["media/1568794560256.jpg","media/1568794560256.jpg","media/1568794560256.jpg","media/1568794560256.jpg","media/1568794560256.jpg","media/1568787004467.jpg","media/1568787004467.jpg"],["Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/vegetation_stratum","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/vegetation_stratum","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/vegetation_stratum","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/vegetation_stratum","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/vegetation_stratum","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/vegetation_stratum","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/vegetation_stratum"],[115.88435548,115.88435548,115.88435548,115.88435548,115.88435548,115.88438584,115.88438584],[-31.99622531,-31.99622531,-31.99622531,-31.99622531,-31.99622531,-31.99620073,-31.99620073],[-26.3056945800781,-26.3056945800781,-26.3056945800781,-26.3056945800781,-26.3056945800781,-8.6624755859375,-8.6624755859375],[115.88436077,115.88436077,115.88436077,115.88436077,115.88436077,115.88440369,115.88440369],[-31.99614759,-31.99614759,-31.99614759,-31.99614759,-31.99614759,-31.99622144,-31.99622144],[-17.8975524902344,-17.8975524902344,-17.8975524902344,-17.8975524902344,-17.8975524902344,-6.26614379882812,-6.26614379882812],[115.88432984,115.88432984,115.88432984,115.88432984,115.88432984,115.88438399,115.88438399],[-31.99610179,-31.99610179,-31.99610179,-31.99610179,-31.99610179,-31.99620546,-31.99620546],[-27.7593383789062,-27.7593383789062,-27.7593383789062,-27.7593383789062,-27.7593383789062,-6.59774780273438,-6.59774780273438],["NA","NA","NA","NA","NA","media/1568787172983.jpg","media/1568787172983.jpg"],["Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/taxon_encounter","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/taxon_encounter","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/taxon_encounter","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/taxon_encounter","Submissions('uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69')/taxon_encounter","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/taxon_encounter","Submissions('uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f')/taxon_encounter"],["https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions","https://sandbox.central.opendatakit.org/v1/projects/14/forms/build_Flora-Quadrat-0-4_1564384341.svc/$metadata#Submissions"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>submissions_id<\/th>\n      <th>nvis_level3_broad_floristic_group<\/th>\n      <th>max_height_m<\/th>\n      <th>foliage_cover<\/th>\n      <th>dominant_species_1<\/th>\n      <th>dominant_species_2<\/th>\n      <th>dominant_species_3<\/th>\n      <th>dominant_species_4<\/th>\n      <th>odata_context.x<\/th>\n      <th>encounter_start_datetime<\/th>\n      <th>reporter<\/th>\n      <th>device_id<\/th>\n      <th>encounter_end_datetime<\/th>\n      <th>system_submission_date<\/th>\n      <th>system_submitter_id<\/th>\n      <th>system_submitter_name<\/th>\n      <th>system_attachments_present<\/th>\n      <th>system_attachments_expected<\/th>\n      <th>meta_instance_id<\/th>\n      <th>location_area_name<\/th>\n      <th>location_quadrat_photo<\/th>\n      <th>location_corner1_longitude<\/th>\n      <th>location_corner1_latitude<\/th>\n      <th>location_corner1_altitude<\/th>\n      <th>habitat_morphological_type<\/th>\n      <th>habitat_morphological_type_photo<\/th>\n      <th>vegetation_stratum_odata_navigation_link<\/th>\n      <th>perimeter_corner2_longitude<\/th>\n      <th>perimeter_corner2_latitude<\/th>\n      <th>perimeter_corner2_altitude<\/th>\n      <th>perimeter_corner3_longitude<\/th>\n      <th>perimeter_corner3_latitude<\/th>\n      <th>perimeter_corner3_altitude<\/th>\n      <th>perimeter_corner4_longitude<\/th>\n      <th>perimeter_corner4_latitude<\/th>\n      <th>perimeter_corner4_altitude<\/th>\n      <th>perimeter_mudmap_photo<\/th>\n      <th>taxon_encounter_odata_navigation_link<\/th>\n      <th>odata_context.y<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[4,18,19,23,24,25,29,30,31,32,33,34,35,36,37]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co"># DT::datatable(head(fq_data_diy))</span></a></code></pre></div>
</div>
<div id="map" class="section level2">
<h2 class="hasAnchor">
<a href="#map" class="anchor"></a>Map</h2>
<p>The R package <code>leaflet</code> provides interactive maps.</p>
<p>Constructing label and popup requires knowledge of the dataset structure.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span>(<span class="dt">width =</span> <span class="dv">800</span>, <span class="dt">height =</span> <span class="dv">600</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addProviderTiles.html">addProviderTiles</a></span>(<span class="st">"OpenStreetMap.Mapnik"</span>, <span class="dt">group =</span> <span class="st">"Place names"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addProviderTiles.html">addProviderTiles</a></span>(<span class="st">"Esri.WorldImagery"</span>, <span class="dt">group =</span> <span class="st">"Aerial"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-methods.html">clearBounds</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addAwesomeMarkers.html">addAwesomeMarkers</a></span>(</a>
<a class="sourceLine" id="cb19-6" title="6">    <span class="dt">data =</span> fq_data,</a>
<a class="sourceLine" id="cb19-7" title="7">    <span class="dt">lng =</span> <span class="op">~</span>location_corner1_longitude, </a>
<a class="sourceLine" id="cb19-8" title="8">    <span class="dt">lat =</span> <span class="op">~</span>location_corner1_latitude,</a>
<a class="sourceLine" id="cb19-9" title="9">    <span class="dt">icon =</span> leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/makeAwesomeIcon.html">makeAwesomeIcon</a></span>(<span class="dt">text =</span> <span class="st">"Q"</span>, <span class="dt">markerColor =</span> <span class="st">"red"</span>),</a>
<a class="sourceLine" id="cb19-10" title="10">    <span class="dt">label =</span> <span class="op">~</span><span class="st"> </span>glue<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span>(<span class="st">"{location_area_name} {encounter_start_datetime}"</span>),</a>
<a class="sourceLine" id="cb19-11" title="11">    <span class="dt">popup =</span> <span class="op">~</span><span class="st"> </span>glue<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span>(</a>
<a class="sourceLine" id="cb19-12" title="12">      <span class="st">"&lt;h3&gt;{location_area_name}&lt;/h3&gt;"</span>,</a>
<a class="sourceLine" id="cb19-13" title="13">      <span class="st">"Survey start {encounter_start_datetime}&lt;/br&gt;"</span>,</a>
<a class="sourceLine" id="cb19-14" title="14">      <span class="st">"Reporter {reporter}&lt;/br&gt;"</span>,</a>
<a class="sourceLine" id="cb19-15" title="15">      <span class="st">"Device {device_id}&lt;/br&gt;"</span>,</a>
<a class="sourceLine" id="cb19-16" title="16">      <span class="st">"&lt;h5&gt;Site&lt;/h5&gt;"</span>,</a>
<a class="sourceLine" id="cb19-17" title="17">      <span class="st">'&lt;div&gt;&lt;img src="{location_quadrat_photo}"'</span>,</a>
<a class="sourceLine" id="cb19-18" title="18">      <span class="st">' height="150px" alt="Quadrat photo"&gt;&lt;/img&gt;&lt;/div&gt;'</span>,</a>
<a class="sourceLine" id="cb19-19" title="19">      <span class="st">"&lt;h5&gt;Mudmap&lt;/h5&gt;"</span>,</a>
<a class="sourceLine" id="cb19-20" title="20">      <span class="st">'&lt;div&gt;&lt;img src="{perimeter_mudmap_photo}'</span>,</a>
<a class="sourceLine" id="cb19-21" title="21">      <span class="st">' height="150px" alt="Mudmap"&gt;&lt;/img&gt;&lt;/div&gt;'</span>,</a>
<a class="sourceLine" id="cb19-22" title="22">      <span class="st">"&lt;h5&gt;Habitat&lt;/h5&gt;"</span>,</a>
<a class="sourceLine" id="cb19-23" title="23">      <span class="st">"Morphological type: {habitat_morphological_type}&lt;/br&gt;"</span>,</a>
<a class="sourceLine" id="cb19-24" title="24">      <span class="st">'&lt;div&gt;&lt;img src="{habitat_morphological_type_photo}"'</span>,</a>
<a class="sourceLine" id="cb19-25" title="25">      <span class="st">'height="150px" alt="Morphological type"&gt;&lt;/img&gt;&lt;/div&gt;'</span></a>
<a class="sourceLine" id="cb19-26" title="26">    ),</a>
<a class="sourceLine" id="cb19-27" title="27">    <span class="dt">clusterOptions =</span> leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-options.html">markerClusterOptions</a></span>()</a>
<a class="sourceLine" id="cb19-28" title="28">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-29" title="29"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addLayersControl.html">addLayersControl</a></span>(</a>
<a class="sourceLine" id="cb19-30" title="30">    <span class="dt">baseGroups =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Place names"</span>, <span class="st">"Aerial"</span>),</a>
<a class="sourceLine" id="cb19-31" title="31">    <span class="dt">options =</span> leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addLayersControl.html">layersControlOptions</a></span>(<span class="dt">collapsed =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb19-32" title="32">  )</a></code></pre></div>
<div id="htmlwidget-0de137c31da2fbc41e30" style="width:800px;height:600px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-0de137c31da2fbc41e30">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"Place names",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Aerial",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[-31.99605811,-31.99614843],[115.88456271,115.88433971],{"icon":"home","markerColor":"red","iconColor":"white","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","text":"Q","prefix":"glyphicon"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<h3>Kensington Carpark 01<\/h3>Survey start 2019-09-18 08:12:21<\/br>Reporter Florian Mayer<\/br>Device f73d2e1221ceaa06<\/br><h5>Site<\/h5><div><img src=\"media/1568794395624.jpg\" height=\"150px\" alt=\"Quadrat photo\"><\/img><\/div><h5>Mudmap<\/h5><div><img src=\"NA height=\"150px\" alt=\"Mudmap\"><\/img><\/div><h5>Habitat<\/h5>Morphological type: mid-slope<\/br><div><img src=\"media/1568794560256.jpg\"height=\"150px\" alt=\"Morphological type\"><\/img><\/div>","<h3>Kensington Planter Box 1<\/h3>Survey start 2019-09-18 06:08:43<\/br>Reporter Florian Mayer<\/br>Device f73d2e1221ceaa06<\/br><h5>Site<\/h5><div><img src=\"media/1568786958640.jpg\" height=\"150px\" alt=\"Quadrat photo\"><\/img><\/div><h5>Mudmap<\/h5><div><img src=\"media/1568787172983.jpg height=\"150px\" alt=\"Mudmap\"><\/img><\/div><h5>Habitat<\/h5>Morphological type: flat<\/br><div><img src=\"media/1568787004467.jpg\"height=\"150px\" alt=\"Morphological type\"><\/img><\/div>"],null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,["Kensington Carpark 01 2019-09-18 08:12:21","Kensington Planter Box 1 2019-09-18 06:08:43"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["Place names","Aerial"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"limits":{"lat":[-31.99614843,-31.99605811],"lng":[115.88433971,115.88456271]}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span>(<span class="dt">width =</span> <span class="dv">800</span>, <span class="dt">height =</span> <span class="dv">600</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addProviderTiles.html">addProviderTiles</a></span>(<span class="st">"OpenStreetMap.Mapnik"</span>, <span class="dt">group =</span> <span class="st">"Place names"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addProviderTiles.html">addProviderTiles</a></span>(<span class="st">"Esri.WorldImagery"</span>, <span class="dt">group =</span> <span class="st">"Aerial"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-methods.html">clearBounds</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addAwesomeMarkers.html">addAwesomeMarkers</a></span>(</a>
<a class="sourceLine" id="cb20-6" title="6">    <span class="dt">data =</span> fq_data_taxa,</a>
<a class="sourceLine" id="cb20-7" title="7">    <span class="dt">lng =</span> <span class="op">~</span><span class="st"> </span>location_corner1_longitude, </a>
<a class="sourceLine" id="cb20-8" title="8">    <span class="dt">lat =</span> <span class="op">~</span><span class="st"> </span>location_corner1_latitude,</a>
<a class="sourceLine" id="cb20-9" title="9">    <span class="dt">icon =</span> leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/makeAwesomeIcon.html">makeAwesomeIcon</a></span>(<span class="dt">text =</span> <span class="st">"T"</span>, <span class="dt">markerColor =</span> <span class="st">"green"</span>),</a>
<a class="sourceLine" id="cb20-10" title="10">    <span class="dt">label =</span> <span class="op">~</span><span class="st"> </span>glue<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span>(<span class="st">"{field_name} {encounter_start_datetime}"</span>),</a>
<a class="sourceLine" id="cb20-11" title="11">    <span class="dt">popup =</span> <span class="op">~</span><span class="st"> </span>glue<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span>(</a>
<a class="sourceLine" id="cb20-12" title="12">      <span class="st">"&lt;h3&gt;{field_name}&lt;/h3&gt;"</span>,</a>
<a class="sourceLine" id="cb20-13" title="13">      <span class="st">"Survey start {encounter_start_datetime}&lt;/br&gt;"</span>,</a>
<a class="sourceLine" id="cb20-14" title="14">      <span class="st">"Reporter {reporter}&lt;/br&gt;"</span>,</a>
<a class="sourceLine" id="cb20-15" title="15">      <span class="st">"Device {device_id}&lt;/br&gt;"</span>,</a>
<a class="sourceLine" id="cb20-16" title="16">      <span class="st">"&lt;h5&gt;Taxon&lt;/h5&gt;"</span>,</a>
<a class="sourceLine" id="cb20-17" title="17">      <span class="st">'&lt;div&gt;&lt;img src="{photo_in_situ}"'</span>,</a>
<a class="sourceLine" id="cb20-18" title="18">      <span class="st">' height="150px" alt="Taxon in situ"&gt;&lt;/img&gt;&lt;/div&gt;'</span>,</a>
<a class="sourceLine" id="cb20-19" title="19">      <span class="st">"Specimen barcode: {voucher_specimen_barcode}&lt;/br&gt;"</span>,</a>
<a class="sourceLine" id="cb20-20" title="20">      <span class="st">"Life form: {life_form}&lt;/br&gt;"</span></a>
<a class="sourceLine" id="cb20-21" title="21">    ),</a>
<a class="sourceLine" id="cb20-22" title="22">    <span class="dt">clusterOptions =</span> leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-options.html">markerClusterOptions</a></span>()</a>
<a class="sourceLine" id="cb20-23" title="23">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-24" title="24"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addLayersControl.html">addLayersControl</a></span>(</a>
<a class="sourceLine" id="cb20-25" title="25">    <span class="dt">baseGroups =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Place names"</span>, <span class="st">"Aerial"</span>),</a>
<a class="sourceLine" id="cb20-26" title="26">    <span class="dt">options =</span> leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/addLayersControl.html">layersControlOptions</a></span>(<span class="dt">collapsed =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb20-27" title="27">  )</a></code></pre></div>
<div id="htmlwidget-693611a735bd9afb2f4d" style="width:800px;height:600px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-693611a735bd9afb2f4d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"Place names",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Aerial",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[-31.99605811,-31.99605811,-31.99614843,-31.99614843,-31.99614843,-31.99614843,-31.99614843],[115.88456271,115.88456271,115.88433971,115.88433971,115.88433971,115.88433971,115.88433971],{"icon":"home","markerColor":"green","iconColor":"white","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","text":"T","prefix":"glyphicon"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<h3>Conostylis yellow<\/h3>Survey start 2019-09-18 08:12:21<\/br>Reporter Florian Mayer<\/br>Device f73d2e1221ceaa06<\/br><h5>Taxon<\/h5><div><img src=\"1568795382633.jpg\" height=\"150px\" alt=\"Taxon in situ\"><\/img><\/div>Specimen barcode: 09929760<\/br>Life form: g2.0_tussock_grass<\/br>","<h3>Blue bush<\/h3>Survey start 2019-09-18 08:12:21<\/br>Reporter Florian Mayer<\/br>Device f73d2e1221ceaa06<\/br><h5>Taxon<\/h5><div><img src=\"1568795579890.jpg\" height=\"150px\" alt=\"Taxon in situ\"><\/img><\/div>Specimen barcode: NA<\/br>Life form: NA<\/br>","<h3>Pileanthus sp. Peachy flowers<\/h3>Survey start 2019-09-18 06:08:43<\/br>Reporter Florian Mayer<\/br>Device f73d2e1221ceaa06<\/br><h5>Taxon<\/h5><div><img src=\"1568787220913.jpg\" height=\"150px\" alt=\"Taxon in situ\"><\/img><\/div>Specimen barcode: 08173089<\/br>Life form: w3.0_shrub<\/br>","<h3>Small pink flowers<\/h3>Survey start 2019-09-18 06:08:43<\/br>Reporter Florian Mayer<\/br>Device f73d2e1221ceaa06<\/br><h5>Taxon<\/h5><div><img src=\"1568787333689.jpg\" height=\"150px\" alt=\"Taxon in situ\"><\/img><\/div>Specimen barcode: NA<\/br>Life form: w3.1_heath_shrub<\/br>","<h3>Small red flowers<\/h3>Survey start 2019-09-18 06:08:43<\/br>Reporter Florian Mayer<\/br>Device f73d2e1221ceaa06<\/br><h5>Taxon<\/h5><div><img src=\"1568787380833.jpg\" height=\"150px\" alt=\"Taxon in situ\"><\/img><\/div>Specimen barcode: NA<\/br>Life form: NA<\/br>","<h3>Funky grass violet flowers<\/h3>Survey start 2019-09-18 06:08:43<\/br>Reporter Florian Mayer<\/br>Device f73d2e1221ceaa06<\/br><h5>Taxon<\/h5><div><img src=\"1568787456664.jpg\" height=\"150px\" alt=\"Taxon in situ\"><\/img><\/div>Specimen barcode: NA<\/br>Life form: g4.0_sedge<\/br>","<h3>Sharp edged red flowers<\/h3>Survey start 2019-09-18 06:08:43<\/br>Reporter Florian Mayer<\/br>Device f73d2e1221ceaa06<\/br><h5>Taxon<\/h5><div><img src=\"1568787504877.jpg\" height=\"150px\" alt=\"Taxon in situ\"><\/img><\/div>Specimen barcode: NA<\/br>Life form: w3.1_heath_shrub<\/br>"],null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,["Conostylis yellow 2019-09-18 08:12:21","Blue bush 2019-09-18 08:12:21","Pileanthus sp. Peachy flowers 2019-09-18 06:08:43","Small pink flowers 2019-09-18 06:08:43","Small red flowers 2019-09-18 06:08:43","Funky grass violet flowers 2019-09-18 06:08:43","Sharp edged red flowers 2019-09-18 06:08:43"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["Place names","Aerial"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"limits":{"lat":[-31.99614843,-31.99605811],"lng":[115.88433971,115.88456271]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="summarising-data" class="section level2">
<h2 class="hasAnchor">
<a href="#summarising-data" class="anchor"></a>Summarising data</h2>
<p>See Hadley Wickam’s <a href="https://r4ds.had.co.nz/exploratory-data-analysis.html">R for Data Science</a> for more ideas on data exploration.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="co"># How many submissions per device?</span></a>
<a class="sourceLine" id="cb21-2" title="2">fq_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(meta_instance_id) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">tally</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="st">  </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>()</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">meta_instance_id</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">uuid:529cb189-8bb2-4cf1-9041-dcde716efb4f</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">uuid:d5e78a78-34db-483d-978f-d9c9a3bc7b69</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="co"># How many species sightings per life form?</span></a>
<a class="sourceLine" id="cb22-3" title="3">fq_data_taxa <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(life_form) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">tally</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="st">  </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>()</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">life_form</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">g2.0_tussock_grass</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">g4.0_sedge</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">w3.0_shrub</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">w3.1_heath_shrub</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="co"># GGplot of a pivot table</span></a>
<a class="sourceLine" id="cb23-3" title="3">fq_data_taxa  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(life_form) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">tally</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-6" title="6"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> life_form, <span class="dt">y =</span> n)) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(</a>
<a class="sourceLine" id="cb23-8" title="8">    <span class="dt">title =</span> <span class="st">"Title"</span>,</a>
<a class="sourceLine" id="cb23-9" title="9">    <span class="dt">subtitle =</span> <span class="st">"Subtitle"</span>,</a>
<a class="sourceLine" id="cb23-10" title="10">    <span class="dt">x =</span> <span class="st">"Life form"</span>,</a>
<a class="sourceLine" id="cb23-11" title="11">    <span class="dt">y =</span> <span class="st">"Abundance"</span></a>
<a class="sourceLine" id="cb23-12" title="12">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-13" title="13"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb23-14" title="14"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span>()</a></code></pre></div>
<p><img src="odata-api_files/figure-html/eda-1.png" width="672"></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="co"># GGplot with groups</span></a>
<a class="sourceLine" id="cb24-3" title="3">fq_data_taxa <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(</a>
<a class="sourceLine" id="cb24-5" title="5">    ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(</a>
<a class="sourceLine" id="cb24-6" title="6">      <span class="dt">x=</span>encounter_start_datetime, </a>
<a class="sourceLine" id="cb24-7" title="7">      <span class="dt">y=</span>field_name, </a>
<a class="sourceLine" id="cb24-8" title="8">      <span class="dt">colour=</span>life_form,</a>
<a class="sourceLine" id="cb24-9" title="9">      <span class="dt">shape=</span>meta_instance_id)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-10" title="10"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(</a>
<a class="sourceLine" id="cb24-11" title="11">    <span class="dt">title=</span><span class="st">"Title"</span>, </a>
<a class="sourceLine" id="cb24-12" title="12">    <span class="dt">subtitle=</span><span class="st">"Subtitle"</span>, </a>
<a class="sourceLine" id="cb24-13" title="13">    <span class="dt">x=</span><span class="st">"Observation date"</span>, </a>
<a class="sourceLine" id="cb24-14" title="14">    <span class="dt">y=</span><span class="st">"Species"</span>, </a>
<a class="sourceLine" id="cb24-15" title="15">    <span class="dt">colour=</span><span class="st">"Life form"</span>,</a>
<a class="sourceLine" id="cb24-16" title="16">    <span class="dt">shape=</span><span class="st">"Data collection device"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-17" title="17"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-18" title="18"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-19" title="19"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</a></code></pre></div>
<p><img src="odata-api_files/figure-html/eda-2.png" width="672"></p>
</div>
</div>
<div id="export" class="section level1">
<h1 class="hasAnchor">
<a href="#export" class="anchor"></a>Export</h1>
<p>The rectangled data can now be exported. e.g. to CSV. Note that all list columns must be either unnested or dropped before exporting to CSV.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1">fq_data <span class="op">%&gt;%</span><span class="st"> </span>readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span>(<span class="st">"flora_quadrats.csv"</span>)</a>
<a class="sourceLine" id="cb25-2" title="2">fq_data_tae <span class="op">%&gt;%</span><span class="st"> </span>readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span>(<span class="st">"flora_quadrats_taxon_encounters.csv"</span>)</a>
<a class="sourceLine" id="cb25-3" title="3">fq_data_veg <span class="op">%&gt;%</span><span class="st"> </span>readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span>(<span class="st">"flora_quadrats_vegetation_strata.csv"</span>)</a></code></pre></div>
</div>
<div id="ruready-to-odk" class="section level1">
<h1 class="hasAnchor">
<a href="#ruready-to-odk" class="anchor"></a>ruReady to ODK?</h1>
<p>In this vignette, we took a scenic tour through the general workflow of accessing and wrangling ODK Central data using <code>ruODK</code>.</p>
<p>For your convenience, <code>ruODK</code> includes a template RMarkdown workbook with the essential steps of the above workflow and colour-by-numbers instructions, which can be used as a starting point for projects using data from ODK Central.</p>
<p>To create a new RMarkdown document from the <code>ruODK</code> template, run <code><a href="https://rdrr.io/pkg/rmarkdown/man/draft.html">rmarkdown::draft("test.Rmd", "odata", package="ruODK")</a></code>.</p>
<p>Users of RStudio can alternatively “Create a new RMarkdown document” “From template” and select ruODK’s template “ODK Central via OData”.</p>
<p>Make sure to install a fresh version of <code>{ruODK}</code> to get the latest and greatest template.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#configure-ruodk">Configure ruODK</a><ul class="nav nav-pills nav-stacked">
<li><a href="#odata-service-document">OData service document</a></li>
      <li><a href="#odata-metadata-document">OData metadata document</a></li>
      <li><a href="#odata-submission-data-documents">OData submission data documents</a></li>
      </ul>
</li>
      <li>
<a href="#detour-data-rectangling">Detour: Data rectangling</a><ul class="nav nav-pills nav-stacked">
<li><a href="#diy-rectangling">DIY rectangling</a></li>
      <li><a href="#spatial-formats---how-granular-would-you-like-your-coordinates">Spatial formats - how granular would you like your coordinates?</a></li>
      </ul>
</li>
      <li>
<a href="#visualise-data">Visualise data</a><ul class="nav nav-pills nav-stacked">
<li><a href="#datatable">Datatable</a></li>
      <li><a href="#map">Map</a></li>
      <li><a href="#summarising-data">Summarising data</a></li>
      </ul>
</li>
      <li><a href="#export">Export</a></li>
      <li><a href="#ruready-to-odk">ruReady to ODK?</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Florian W. Mayer, <a href="https://www.dbca.wa.gov.au/science/"><img src="man/figures/dbca_bcs.png" width="150" alt="DBCA"></a>, <a href="https://flatbacks.dbca.wa.gov.au/"><img src="man/figures/flatbacks.svg" width="150" alt="NWSFTCP"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
